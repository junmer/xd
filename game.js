!function(t){var e,i;!function(){function t(t,e){if(!e)return t;if(0===t.indexOf(".")){var i=e.split("/"),n=t.split("/"),a=i.length-1,s=n.length,r=0,o=0;t:for(var h=0;s>h;h++)switch(n[h]){case"..":if(!(a>r))break t;r++,o++;break;case".":o++;break;default:break t}return i.length=a-r,n=n.slice(o),i.concat(n).join("/")}return t}function n(e){function i(i,r){if("string"==typeof i){var o=n[i];return o||(o=s(t(i,e)),n[i]=o),o}i instanceof Array&&(r=r||function(){},r.apply(this,a(i,r,e)))}var n={};return i}function a(i,n,a){for(var o=[],h=r[a],u=0,c=Math.min(i.length,n.length);c>u;u++){var l,d=t(i[u],a);switch(d){case"require":l=h&&h.require||e;break;case"exports":l=h.exports;break;case"module":l=h;break;default:l=s(d)}o.push(l)}return o}function s(t){var e=r[t];if(!e)throw new Error("No "+t);if(!e.defined){var i=e.factory,n=i.apply(this,a(e.deps||[],i,t));"undefined"!=typeof n&&(e.exports=n),e.defined=1}return e.exports}var r={};i=function(t,e,i){r[t]={id:t,deps:e,factory:i,defined:0,exports:{},require:n(t)}},e=n("")}(),i("ig",["ig/ig"],function(t){return t}),i("ig/ig",["require","./util","./config"],function(t){!function(){for(var t=0,e=["ms","moz","webkit","o"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var i=(new Date).getTime(),n=Math.max(0,16-(i-t)),a=setTimeout(function(){e(i+n)},n);return t=i+n,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}();var e=t("./util"),i=t("./config"),n={};return n.setConfig=i.setConfig,n.getConfig=i.getConfig,n.setConfig("status",{NORMAL:1,NOT_RENDER:2,NOT_UPDATE:3,NOT_RU:4,DESTROYED:5}),n.setConfig("width",383),n.setConfig("height",550),n.setConfig("maxWidth",5e3),n.setConfig("maxHeight",5e3),n.setConfig("fps",60),n.loop=function(t){var i,a,s=e.extend(!0,{},{step:e.noop,exec:e.noop,jumpFrames:0},t),r=n.getConfig("fps")||60,o=1e3/r,h=0,u=0,c=Date.now(),l=0,d=0,f=0,g=0===s.jumpFrames?1:s.jumpFrames;!function p(){if(i=window.requestAnimationFrame(p),u++,u>s.jumpFrames)if(u=0,a=Date.now(),h=a-c,c=a,l+=h,1e3*g>=h){for(;l>=o*g;)d++,s.step(o*(r/1e3),d,i),l-=o*g;f++,s.exec(f)}else l-=h}()},n}),i("ig/dep/howler",["require"],function(){var t={},e=null,i=!0,n=!1;try{"undefined"!=typeof AudioContext?e=new AudioContext:"undefined"!=typeof webkitAudioContext?e=new webkitAudioContext:i=!1}catch(a){i=!1}if(!i)if("undefined"!=typeof Audio)try{new Audio}catch(a){n=!0}else n=!0;if(i){var s="undefined"==typeof e.createGain?e.createGainNode():e.createGain();s.gain.value=1,s.connect(e.destination)}var r=function(t){this._volume=1,this._muted=!1,this.usingWebAudio=i,this.ctx=e,this.noAudio=n,this._howls=[],this._codecs=t,this.iOSAutoEnable=!0};r.prototype={volume:function(t){var e=this;if(t=parseFloat(t),t>=0&&1>=t){e._volume=t,i&&(s.gain.value=t);for(var n in e._howls)if(e._howls.hasOwnProperty(n)&&e._howls[n]._webAudio===!1)for(var a=0;a<e._howls[n]._audioNode.length;a++)e._howls[n]._audioNode[a].volume=e._howls[n]._volume*e._volume;return e}return i?s.gain.value:e._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(t){var e=this;e._muted=t,i&&(s.gain.value=t?0:e._volume);for(var n in e._howls)if(e._howls.hasOwnProperty(n)&&e._howls[n]._webAudio===!1)for(var a=0;a<e._howls[n]._audioNode.length;a++)e._howls[n]._audioNode[a].muted=t},codecs:function(t){return this._codecs[t]},_enableiOSAudio:function(){var t=this;if(!e||!t._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){t._iOSEnabled=!1;var i=function(){var n=e.createBuffer(1,1,22050),a=e.createBufferSource();a.buffer=n,a.connect(e.destination),"undefined"==typeof a.start?a.noteOn(0):a.start(0),setTimeout(function(){(a.playbackState===a.PLAYING_STATE||a.playbackState===a.FINISHED_STATE)&&(t._iOSEnabled=!0,t.iOSAutoEnable=!1,window.removeEventListener("touchstart",i,!1))},0)};return window.addEventListener("touchstart",i,!1),t}}};var o=null,h={};n||(o=new Audio,h={mp3:!!o.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!o.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!o.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!o.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(o.canPlayType("audio/x-m4a;")||o.canPlayType("audio/m4a;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(o.canPlayType("audio/x-mp4;")||o.canPlayType("audio/mp4;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")});var u=new r(h),c=function(t){var n=this;n._autoplay=t.autoplay||!1,n._buffer=t.buffer||!1,n._duration=t.duration||0,n._format=t.format||null,n._loop=t.loop||!1,n._loaded=!1,n._sprite=t.sprite||{},n._src=t.src||"",n._pos3d=t.pos3d||[0,0,-.5],n._volume=void 0!==t.volume?t.volume:1,n._urls=t.urls||[],n._rate=t.rate||1,n._model=t.model||null,n._onload=[t.onload||function(){}],n._onloaderror=[t.onloaderror||function(){}],n._onend=[t.onend||function(){}],n._onpause=[t.onpause||function(){}],n._onplay=[t.onplay||function(){}],n._onendTimer=[],n._webAudio=i&&!n._buffer,n._audioNode=[],n._webAudio&&n._setupAudioNode(),"undefined"!=typeof e&&e&&u.iOSAutoEnable&&u._enableiOSAudio(),u._howls.push(n),n.load()};if(c.prototype={load:function(){var t=this,e=null;if(n)return void t.on("loaderror");for(var i=0;i<t._urls.length;i++){var a,s;if(t._format)a=t._format;else{if(s=t._urls[i],a=/^data:audio\/([^;,]+);/i.exec(s),a||(a=/\.([^.]+)$/.exec(s.split("?",1)[0])),!a)return void t.on("loaderror");a=a[1].toLowerCase()}if(h[a]){e=t._urls[i];break}}if(!e)return void t.on("loaderror");if(t._src=e,t._webAudio)l(t,e);else{var o=new Audio;o.addEventListener("error",function(){o.error&&4===o.error.code&&(r.noAudio=!0),t.on("loaderror",{type:o.error?o.error.code:0})},!1),t._audioNode.push(o),o.src=e,o._pos=0,o.preload="auto",o.volume=u._muted?0:t._volume*u.volume();var c=function(){t._duration=Math.ceil(10*o.duration)/10,0===Object.getOwnPropertyNames(t._sprite).length&&(t._sprite={_default:[0,1e3*t._duration]}),t._loaded||(t._loaded=!0,t.on("load")),t._autoplay&&t.play(),o.removeEventListener("canplaythrough",c,!1)};o.addEventListener("canplaythrough",c,!1),o.load()}return t},urls:function(t){var e=this;return t?(e.stop(),e._urls="string"==typeof t?[t]:t,e._loaded=!1,e.load(),e):e._urls},play:function(t,i){var n=this;return"function"==typeof t&&(i=t),t&&"function"!=typeof t||(t="_default"),n._loaded?n._sprite[t]?(n._inactiveNode(function(a){a._sprite=t;var s=a._pos>0?a._pos:n._sprite[t][0]/1e3,r=0;n._webAudio?(r=n._sprite[t][1]/1e3-a._pos,a._pos>0&&(s=n._sprite[t][0]/1e3+s)):r=n._sprite[t][1]/1e3-(s-n._sprite[t][0]/1e3);var o,h=!(!n._loop&&!n._sprite[t][2]),c="string"==typeof i?i:Math.round(Date.now()*Math.random())+"";if(function(){var e={id:c,sprite:t,loop:h};o=setTimeout(function(){!n._webAudio&&h&&n.stop(e.id).play(t,e.id),n._webAudio&&!h&&(n._nodeById(e.id).paused=!0,n._nodeById(e.id)._pos=0,n._clearEndTimer(e.id)),n._webAudio||h||n.stop(e.id),n.on("end",c)},1e3*r),n._onendTimer.push({timer:o,id:e.id})}(),n._webAudio){var l=n._sprite[t][0]/1e3,d=n._sprite[t][1]/1e3;a.id=c,a.paused=!1,g(n,[h,l,d],c),n._playStart=e.currentTime,a.gain.value=n._volume,"undefined"==typeof a.bufferSource.start?h?a.bufferSource.noteGrainOn(0,s,86400):a.bufferSource.noteGrainOn(0,s,r):h?a.bufferSource.start(0,s,86400):a.bufferSource.start(0,s,r)}else{if(4!==a.readyState&&(a.readyState||!navigator.isCocoonJS))return n._clearEndTimer(c),function(){var e=n,s=t,r=i,o=a,h=function(){e.play(s,r),o.removeEventListener("canplaythrough",h,!1)};o.addEventListener("canplaythrough",h,!1)}(),n;a.readyState=4,a.id=c,a.currentTime=s,a.muted=u._muted||a.muted,a.volume=n._volume*u.volume(),setTimeout(function(){a.play()},0)}return n.on("play"),"function"==typeof i&&i(c),n}),n):("function"==typeof i&&i(),n):(n.on("load",function(){n.play(t,i)}),n)},pause:function(t){var e=this;if(!e._loaded)return e.on("play",function(){e.pause(t)}),e;e._clearEndTimer(t);var i=t?e._nodeById(t):e._activeNode();if(i)if(i._pos=e.pos(null,t),e._webAudio){if(!i.bufferSource||i.paused)return e;i.paused=!0,"undefined"==typeof i.bufferSource.stop?i.bufferSource.noteOff(0):i.bufferSource.stop(0)}else i.pause();return e.on("pause"),e},stop:function(t){var e=this;if(!e._loaded)return e.on("play",function(){e.stop(t)}),e;e._clearEndTimer(t);var i=t?e._nodeById(t):e._activeNode();if(i)if(i._pos=0,e._webAudio){if(!i.bufferSource||i.paused)return e;i.paused=!0,"undefined"==typeof i.bufferSource.stop?i.bufferSource.noteOff(0):i.bufferSource.stop(0)}else isNaN(i.duration)||(i.pause(),i.currentTime=0);return e},mute:function(t){var e=this;if(!e._loaded)return e.on("play",function(){e.mute(t)}),e;var i=t?e._nodeById(t):e._activeNode();return i&&(e._webAudio?i.gain.value=0:i.muted=!0),e},unmute:function(t){var e=this;if(!e._loaded)return e.on("play",function(){e.unmute(t)}),e;var i=t?e._nodeById(t):e._activeNode();return i&&(e._webAudio?i.gain.value=e._volume:i.muted=!1),e},volume:function(t,e){var i=this;if(t=parseFloat(t),t>=0&&1>=t){if(i._volume=t,!i._loaded)return i.on("play",function(){i.volume(t,e)}),i;var n=e?i._nodeById(e):i._activeNode();return n&&(i._webAudio?n.gain.value=t:n.volume=t*u.volume()),i}return i._volume},loop:function(t){var e=this;return"boolean"==typeof t?(e._loop=t,e):e._loop},sprite:function(t){var e=this;return"object"==typeof t?(e._sprite=t,e):e._sprite},pos:function(t,i){var n=this;if(!n._loaded)return n.on("load",function(){n.pos(t)}),"number"==typeof t?n:n._pos||0;t=parseFloat(t);var a=i?n._nodeById(i):n._activeNode();if(a)return t>=0?(n.pause(i),a._pos=t,n.play(a._sprite,i),n):n._webAudio?a._pos+(e.currentTime-n._playStart):a.currentTime;if(t>=0)return n;for(var s=0;s<n._audioNode.length;s++)if(n._audioNode[s].paused&&4===n._audioNode[s].readyState)return n._webAudio?n._audioNode[s]._pos:n._audioNode[s].currentTime},pos3d:function(t,e,i,n){var a=this;if(e="undefined"!=typeof e&&e?e:0,i="undefined"!=typeof i&&i?i:-.5,!a._loaded)return a.on("play",function(){a.pos3d(t,e,i,n)}),a;if(!(t>=0||0>t))return a._pos3d;if(a._webAudio){var s=n?a._nodeById(n):a._activeNode();s&&(a._pos3d=[t,e,i],s.panner.setPosition(t,e,i),s.panner.panningModel=a._model||"HRTF")}return a},fade:function(t,e,i,n,a){var s=this,r=Math.abs(t-e),o=t>e?"down":"up",h=r/.01,u=i/h;if(!s._loaded)return s.on("load",function(){s.fade(t,e,i,n,a)}),s;s.volume(t,a);for(var c=1;h>=c;c++)!function(){var t=s._volume+("up"===o?.01:-.01)*c,i=Math.round(1e3*t)/1e3,r=e;setTimeout(function(){s.volume(i,a),i===r&&n&&n()},u*c)}()},fadeIn:function(t,e,i){return this.volume(0).play().fade(0,t,e,i)},fadeOut:function(t,e,i,n){var a=this;return a.fade(a._volume,t,e,function(){i&&i(),a.pause(n),a.on("end")},n)},_nodeById:function(t){for(var e=this,i=e._audioNode[0],n=0;n<e._audioNode.length;n++)if(e._audioNode[n].id===t){i=e._audioNode[n];break}return i},_activeNode:function(){for(var t=this,e=null,i=0;i<t._audioNode.length;i++)if(!t._audioNode[i].paused){e=t._audioNode[i];break}return t._drainPool(),e},_inactiveNode:function(t){for(var e=this,i=null,n=0;n<e._audioNode.length;n++)if(e._audioNode[n].paused&&4===e._audioNode[n].readyState){t(e._audioNode[n]),i=!0;break}if(e._drainPool(),!i){var a;if(e._webAudio)a=e._setupAudioNode(),t(a);else{e.load(),a=e._audioNode[e._audioNode.length-1];var s=navigator.isCocoonJS?"canplaythrough":"loadedmetadata",r=function(){a.removeEventListener(s,r,!1),t(a)};a.addEventListener(s,r,!1)}}},_drainPool:function(){var t,e=this,i=0;for(t=0;t<e._audioNode.length;t++)e._audioNode[t].paused&&i++;for(t=e._audioNode.length-1;t>=0&&!(5>=i);t--)e._audioNode[t].paused&&(e._webAudio&&e._audioNode[t].disconnect(0),i--,e._audioNode.splice(t,1))},_clearEndTimer:function(t){for(var e=this,i=0,n=0;n<e._onendTimer.length;n++)if(e._onendTimer[n].id===t){i=n;break}var a=e._onendTimer[i];a&&(clearTimeout(a.timer),e._onendTimer.splice(i,1))},_setupAudioNode:function(){var t=this,i=t._audioNode,n=t._audioNode.length;return i[n]="undefined"==typeof e.createGain?e.createGainNode():e.createGain(),i[n].gain.value=t._volume,i[n].paused=!0,i[n]._pos=0,i[n].readyState=4,i[n].connect(s),i[n].panner=e.createPanner(),i[n].panner.panningModel=t._model||"equalpower",i[n].panner.setPosition(t._pos3d[0],t._pos3d[1],t._pos3d[2]),i[n].panner.connect(i[n]),i[n]},on:function(t,e){var i=this,n=i["_on"+t];if("function"==typeof e)n.push(e);else for(var a=0;a<n.length;a++)e?n[a].call(i,e):n[a].call(i);return i},off:function(t,e){var i=this,n=i["_on"+t],a=e?e.toString():null;if(a){for(var s=0;s<n.length;s++)if(a===n[s].toString()){n.splice(s,1);break}}else i["_on"+t]=[];return i},unload:function(){for(var e=this,i=e._audioNode,n=0;n<e._audioNode.length;n++)i[n].paused||(e.stop(i[n].id),e.on("end",i[n].id)),e._webAudio?i[n].disconnect(0):i[n].src="";for(n=0;n<e._onendTimer.length;n++)clearTimeout(e._onendTimer[n].timer);var a=u._howls.indexOf(e);null!==a&&a>=0&&u._howls.splice(a,1),delete t[e._src],e=null}},i)var l=function(e,i){if(i in t)return e._duration=t[i].duration,void f(e);if(/^data:[^;]+;base64,/.test(i)){for(var n=atob(i.split(",")[1]),a=new Uint8Array(n.length),s=0;s<n.length;++s)a[s]=n.charCodeAt(s);d(a.buffer,e,i)}else{var r=new XMLHttpRequest;r.open("GET",i,!0),r.responseType="arraybuffer",r.onload=function(){d(r.response,e,i)},r.onerror=function(){e._webAudio&&(e._buffer=!0,e._webAudio=!1,e._audioNode=[],delete e._gainNode,delete t[i],e.load())};try{r.send()}catch(o){r.onerror()}}},d=function(i,n,a){e.decodeAudioData(i,function(e){e&&(t[a]=e,f(n,e))},function(){n.on("loaderror")})},f=function(t,e){t._duration=e?e.duration:t._duration,0===Object.getOwnPropertyNames(t._sprite).length&&(t._sprite={_default:[0,1e3*t._duration]}),t._loaded||(t._loaded=!0,t.on("load")),t._autoplay&&t.play()},g=function(i,n,a){var s=i._nodeById(a);s.bufferSource=e.createBufferSource(),s.bufferSource.buffer=t[i._src],s.bufferSource.connect(s.panner),s.bufferSource.loop=n[0],n[0]&&(s.bufferSource.loopStart=n[1],s.bufferSource.loopEnd=n[1]+n[2]),s.bufferSource.playbackRate.value=i._rate};return"undefined"!=typeof window&&(window.Howler=u,window.Howl=c),{Howler:u,Howl:c}}),i("ig/config",["require"],function(){var t={},e={};return e.setConfig=function(e,i){return e&&(t[e]=i),t},e.getConfig=function(e){return e?t[e]:t},e}),i("ig/util",["require"],function(){var t=Math.PI/180,e=180/Math.PI,i=Object.prototype,n={};return n.noop=function(){},n.getType=function(t){var e=i.toString.call(t).slice(8,-1);return e.toLowerCase()},n.isType=function(t,e){var i=n.getType(e);return t.toLowerCase()===i},n.isWindow=function(t){return null!=t&&t===t.window},n.isPlainObject=function(t){return"object"!==n.getType(t)||t.nodeType||n.isWindow(t)?!1:t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf")?!1:!0},n.extend=function(){var t,e,i,a,s,r,o=arguments[0]||{},h=1,u=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[h]||{},h++),"object"==typeof o||n.isType("function",o)||(o={}),h===u&&(o=this,h--);u>h;h++)if(null!=(t=arguments[h]))for(e in t)if(t.hasOwnProperty(e)){if(i=o[e],a=t[e],o===a)continue;c&&a&&(n.isPlainObject(a)||(s=Array.isArray(a)))?(s?(s=!1,r=i&&Array.isArray(i)?i:[]):r=i&&n.isPlainObject(i)?i:{},o[e]=n.extend(c,r,a)):void 0!==a&&(o[e]=a)}return o},n.inherits=function(t,e){var i=function(){};i.prototype=e.prototype;var n=t.prototype,a=t.prototype=new i;for(var s in n)n.hasOwnProperty(s)&&(a[s]=n[s]);return t.prototype.constructor=t,t.superClass=e.prototype,t},n.throttle=function(t,e,i){var n,a,s,r=null,o=0;i||(i={});var h=function(){o=i.leading===!1?0:Date.now(),r=null,s=t.apply(n,a),r||(n=a=null)};return function(){var u=Date.now();o||i.leading!==!1||(o=u);var c=e-(u-o);return n=this,a=arguments,0>=c||c>e?(clearTimeout(r),r=null,o=u,s=t.apply(n,a),r||(n=a=null)):r||i.trailing===!1||(r=setTimeout(h,c)),s}},n.debounce=function(t,e,i){var n,a,s,r,o,h=function(){var u=Date.now()-r;e>u&&u>=0?n=setTimeout(h,e-u):(n=null,i||(o=t.apply(s,a),n||(s=a=null)))};return function(){s=this,a=arguments,r=Date.now();var u=i&&!n;return n||(n=setTimeout(h,e)),u&&(o=t.apply(s,a),s=a=null),o}},n.getImgAsset=function(t,e,i){if(e[t])return e[t];for(var a=0,s=i.length;s>a;a++){if("string"===n.getType(i[a])&&i[a]===t)return i[a];if("object"===n.getType(i[a])&&i[a].src===t)return e[i[a].id]}return null},n.deg2Rad=function(e){return e*t},n.rad2Deg=function(t){return t*e},n.randomInt=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},n.randomFloat=function(t,e){return Math.random()*(e-t)+t},n.removeArrByCondition=function(t,e){for(var i,n=-1,a=0,s=t.length;s>a;a++)if(i=t[a],e(i)){n=a;break}-1!==n&&t.splice(n,1)},n.window2Canvas=function(t,e,i){var n=t.getBoundingClientRect();return{x:Math.round(e-n.left*(t.width/n.width)),y:Math.round(i-n.top*(t.height/n.height))}},n.domWrap=function(t,e,i){return t.parentNode.insertBefore(e,t),e.appendChild(t),e.id=i||"ig-create-dom-"+Date.now(),t},n.getElementOffset=function(t){for(var e=t.offsetLeft,i=t.offsetTop;(t=t.offsetParent)&&t!=document.body&&t!=document;)e+=t.offsetLeft,i+=t.offsetTop;return{x:e,y:i}},n}),i("ig/easing",["require"],function(){var t={};return t.linear=function(t,e,i,n){return i*t/n+e},t.easeInQuad=function(t,e,i,n){return i*(t/=n)*t+e},t.easeOutQuad=function(t,e,i,n){return-i*(t/=n)*(t-2)+e},t.easeInOutQuad=function(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},t.easeInCubic=function(t,e,i,n){return i*(t/=n)*t*t+e},t.easeOutCubic=function(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e},t.easeInOutCubic=function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},t.easeInQuart=function(t,e,i,n){return i*(t/=n)*t*t*t+e},t.easeOutQuart=function(t,e,i,n){return-i*((t=t/n-1)*t*t*t-1)+e},t.easeInOutQuart=function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},t.easeInQuint=function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},t.easeOutQuint=function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},t.easeInOutQuint=function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},t.easeInSine=function(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e},t.easeOutSine=function(t,e,i,n){return i*Math.sin(t/n*(Math.PI/2))+e},t.easeInOutSine=function(t,e,i,n){return-i/2*(Math.cos(Math.PI*t/n)-1)+e},t.easeInExpo=function(t,e,i,n){return 0===t?e:i*Math.pow(2,10*(t/n-1))+e},t.easeOutExpo=function(t,e,i,n){return t===n?e+i:i*(-Math.pow(2,-10*t/n)+1)+e},t.easeInOutExpo=function(t,e,i,n){return 0===t?e:t===n?e+i:(t/=n/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(-Math.pow(2,-10*--t)+2)+e},t.easeInCirc=function(t,e,i,n){return-i*(Math.sqrt(1-(t/=n)*t)-1)+e},t.easeOutCirc=function(t,e,i,n){return i*Math.sqrt(1-(t=t/n-1)*t)+e},t.easeInOutCirc=function(t,e,i,n){return(t/=n/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},t.easeInElastic=function(t,e,i,n,a,s){if(0===t)return e;if(1===(t/=n))return e+i;s||(s=.3*n);var r;return!a||a<Math.abs(i)?(a=i,r=s/4):r=s/(2*Math.PI)*Math.asin(i/a),-(a*Math.pow(2,10*(t-=1))*Math.sin(2*(t*n-r)*Math.PI/s))+e},t.easeOutElastic=function(t,e,i,n,a,s){if(0===t)return e;if(1===(t/=n))return e+i;s||(s=.3*n);var r;return!a||a<Math.abs(i)?(a=i,r=s/4):r=s/(2*Math.PI)*Math.asin(i/a),a*Math.pow(2,-10*t)*Math.sin(2*(t*n-r)*Math.PI/s)+i+e},t.easeInOutElastic=function(t,e,i,n,a,s){if(0===t)return e;if(2===(t/=n/2))return e+i;s||(s=.3*n*1.5);var r;return!a||a<Math.abs(i)?(a=i,r=s/4):r=s/(2*Math.PI)*Math.asin(i/a),1>t?-.5*a*Math.pow(2,10*(t-=1))*Math.sin(2*(t*n-r)*Math.PI/s)+e:a*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*n-r)*Math.PI/s)*.5+i+e},t.easeInBack=function(t,e,i,n,a){return void 0===a&&(a=1.70158),i*(t/=n)*t*((a+1)*t-a)+e},t.easeOutBack=function(t,e,i,n,a){return void 0===a&&(a=1.70158),i*((t=t/n-1)*t*((a+1)*t+a)+1)+e},t.easeInOutBack=function(t,e,i,n,a){return void 0===a&&(a=1.70158),(t/=n/2)<1?i/2*t*t*(((a*=1.525)+1)*t-a)+e:i/2*((t-=2)*t*(((a*=1.525)+1)*t+a)+2)+e},t.easeInBounce=function(e,i,n,a){return n-t.easeOutBounce(a-e,0,n,a)+i},t.easeOutBounce=function(t,e,i,n){return(t/=n)<1/2.75?7.5625*i*t*t+e:2/2.75>t?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},t.easeInOutBounce=function(e,i,n,a){return a/2>e?.5*t.easeInBounce(2*e,0,n,a)+i:.5*t.easeOutBounce(2*e-a,0,n,a)+.5*n+i},t}),i("ig/env",["require","./ig"],function(t){function e(t){var e={},i={},n=t.match(/Web[kK]it[\/]{0,1}([\d.]+)/),a=t.match(/(Android);?[\s\/]+([\d.]+)?/),s=!!t.match(/\(Macintosh\; Intel /),r=t.match(/(iPad).*OS\s([\d_]+)/),o=t.match(/(iPod)(.*OS\s([\d_]+))?/),h=!r&&t.match(/(iPhone\sOS)\s([\d_]+)/),u=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),c=t.match(/Windows Phone ([\d.]+)/),l=u&&t.match(/TouchPad/),d=t.match(/Kindle\/([\d.]+)/),f=t.match(/Silk\/([\d._]+)/),g=t.match(/(BlackBerry).*Version\/([\d.]+)/),p=t.match(/(BB10).*Version\/([\d.]+)/),m=t.match(/(RIM\sTablet\sOS)\s([\d.]+)/),v=t.match(/PlayBook/),y=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/),x=t.match(/Firefox\/([\d.]+)/),w=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),b=!y&&t.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),_=b||t.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/),S=t.match(/MicroMessenger\/([\d.]+)/),I=t.match(/baiduboxapp\/[^\/]+\/([\d.]+)_/)||t.match(/baiduboxapp\/([\d.]+)/)||t.match(/BaiduHD\/([\d.]+)/)||t.match(/FlyFlow\/([\d.]+)/)||t.match(/baidubrowser\/([\d.]+)/),O=t.match(/MQQBrowser\/([\d.]+)/)||t.match(/QQ\/([\d.]+)/),A=t.match(/UCBrowser\/([\d.]+)/),C=t.match(/SogouMobileBrowser\/([\d.]+)/),P=a&&t.match(/MiuiBrowser\/([\d.]+)/),T=t.match(/LBKIT/),D=t.match(/Mercury\/([\d.]+)/);return(i.webkit=!!n)&&(i.version=n[1]),a&&(e.android=!0,e.version=a[2]),h&&!o&&(e.ios=e.iphone=!0,e.version=h[2].replace(/_/g,".")),r&&(e.ios=e.ipad=!0,e.version=r[2].replace(/_/g,".")),o&&(e.ios=e.ipod=!0,e.version=o[3]?o[3].replace(/_/g,"."):null),c&&(e.wp=!0,e.version=c[1]),u&&(e.webos=!0,e.version=u[2]),l&&(e.touchpad=!0),g&&(e.blackberry=!0,e.version=g[2]),p&&(e.bb10=!0,e.version=p[2]),m&&(e.rimtabletos=!0,e.version=m[2]),v&&(i.playbook=!0),d&&(e.kindle=!0,e.version=d[1]),f&&(i.silk=!0,i.version=f[1]),!f&&e.android&&t.match(/Kindle Fire/)&&(i.silk=!0),y&&(i.chrome=!0,i.version=y[1]),x&&(i.firefox=!0,i.version=x[1]),w&&(i.ie=!0,i.version=w[1]),_&&(s||e.ios)&&(i.safari=!0,s&&(i.version=_[1])),b&&(i.webview=!0),S&&(i.wechat=!0,i.version=S[1]),I&&(delete i.webview,i.baidu=!0,i.version=I[1]),O&&(i.qq=!0,i.version=O[1]),A&&(delete i.webview,i.uc=!0,i.version=A[1]),C&&(delete i.webview,i.sogou=!0,i.version=C[1]),P&&(i.xiaomi=!0,i.version=P[1]),T&&(i.liebao=!0,i.version="0"),D&&(i.mercury=!0,i.version=D[1]),navigator.standalone&&(i.standalone=!0),e.tablet=!!(r||v||a&&!t.match(/Mobile/)||x&&t.match(/Tablet/)||w&&!t.match(/Phone/)&&t.match(/Touch/)),e.phone=!(e.tablet||e.ipod||!(a||h||u||g||p||y&&t.match(/Android/)||y&&t.match(/CriOS\/([\d.]+)/)||x&&t.match(/Mobile/)||w&&t.match(/Touch/))),{browser:i,os:e}}function i(t){t.audioData=!!window.Audio,t.webAudio=!(!window.AudioContext&&!window.webkitAudioContext),t.webAudio&&(n.audioContext="undefined"!=typeof window.AudioContext?new window.AudioContext:new window.webkitAudioContext);var e=document.createElement("audio");try{e.canPlayType&&(e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(t.ogg=!0),(e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||e.canPlayType("audio/opus;").replace(/^no$/,""))&&(t.opus=!0),e.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(t.mp3=!0),e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")&&(t.wav=!0),(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;").replace(/^no$/,""))&&(t.m4a=!0),e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(t.webm=!0))}catch(i){}}var n=t("./ig"),a=function(){try{var t="localStorage"in window&&null!==window.localStorage,e={k:"test key",v:"test value"};return t&&(localStorage.setItem(e.k,e.v),t=e.v===localStorage.getItem(e.k),localStorage.removeItem(e.k)),t}catch(i){return!1}}(),s=e(navigator.userAgent),r={browser:s.browser,os:s.os,supportOrientation:"number"==typeof window.orientation&&"object"==typeof window.onorientationchange,supportTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportGeolocation:null!=navigator.geolocation,supportLocalStorage:a,isAndroid:s.os.android,isIOS:s.os.ios,isPhone:s.os.phone,isTablet:s.os.tablet,isMobile:s.os.phone||s.os.tablet};return i(r),r}),i("ig/Event",["require"],function(){function t(){this._events={}}var e="_observerGUID";return t.prototype={constructor:t,on:function(t,i){this._events||(this._events={});var n=this._events[t];return n||(n=this._events[t]=[]),i.hasOwnProperty(e)||(i[e]=+new Date),n.push(i),this},un:function(t,e){if(this._events){if(!e)return void(this._events[t]=[]);var i=this._events[t];if(i)for(var n=0;n<i.length;n++)i[n]===e&&(i.splice(n,1),n--);return this}},fire:function(t,i){1===arguments.length&&"object"==typeof t&&(i=t,t=i.type);var n=this["on"+t];if("function"==typeof n&&n.call(this,i),this._events){null==i&&(i={}),"[object Object]"!==Object.prototype.toString.call(i)&&(i={data:i}),i.type=t,i.target=this;var a={},s=this._events[t];if(s){s=s.slice();for(var r=0;r<s.length;r++){var o=s[r];a.hasOwnProperty(o[e])||o.call(this,i)}}if("*"!==t){var h=this._events["*"];if(!h)return;h=h.slice();for(var r=0;r<h.length;r++){var o=h[r];a.hasOwnProperty(o[e])||o.call(this,i)}}}},clearEvents:function(){this._events={}},enable:function(e){e._events={},e.on=t.prototype.on,e.un=t.prototype.un,e.fire=t.prototype.fire}},t}),i("ig/Vector",["require"],function(){function t(t,e){this.x=t||0,this.y=e||t||0}var e=Math.sqrt,i=Math.pow;return t.prototype={constructor:t,normalize:function(){var t=this.getMagnitude();return 0!==t&&(this.x/=t,this.y/=t),this},getMagnitude:function(){return e(i(this.x,2)+i(this.y,2))},add:function(e,i){var n=this.x+e.x,a=this.y+e.y;return i?new t(n,a):(this.x=n,this.y=a,this)},sub:function(e,i){var n=this.x-e.x,a=this.y-e.y;return i?new t(n,a):(this.x=n,this.y=a,this)},dot:function(t){return this.x*t.x+this.y*t.y},edge:function(t){return this.sub(t,!0)},perpendicular:function(e){var i=-this.x,n=this.y;return e?new t(i,n):(this.x=i,this.y=n,this)},normal:function(){return this.perpendicular(!0).normalize()}},t}),i("ig/Matrix",["require","./util"],function(t){function e(){return this.m=[1,0,0,1,0,0],this}var i=t("./util"),n=Math.cos,a=Math.sin;return e.prototype={constructor:e,reset:function(){return this.m=[1,0,0,1,0,0],this},mul:function(t){var e=this.m[0]*t.m[0]+this.m[2]*t.m[1],i=this.m[1]*t.m[0]+this.m[3]*t.m[1],n=this.m[0]*t.m[2]+this.m[2]*t.m[3],a=this.m[1]*t.m[2]+this.m[3]*t.m[3],s=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],r=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=e,this.m[1]=i,this.m[2]=n,this.m[3]=a,this.m[4]=s,this.m[5]=r,this},invert:function(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,i=-this.m[1]*t,n=-this.m[2]*t,a=this.m[0]*t,s=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),r=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=e,this.m[1]=i,this.m[2]=n,this.m[3]=a,this.m[4]=s,this.m[5]=r,this},rotate:function(t){var e=i.deg2Rad(t),s=n(e),r=a(e),o=this.m[0]*s+this.m[2]*r,h=this.m[1]*s+this.m[3]*r,u=this.m[0]*-r+this.m[2]*s,c=this.m[1]*-r+this.m[3]*s;return this.m[0]=o,this.m[1]=h,this.m[2]=u,this.m[3]=c,this},translate:function(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this},scale:function(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this},transformPoint:function(t,e){var i=t,n=e;return t=i*this.m[0]+n*this.m[2]+this.m[4],e=i*this.m[1]+n*this.m[3]+this.m[5],{x:t,y:e}},setCtxTransform:function(t){var e=this.m;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}},e}),i("ig/Animation",["require","./ig","./util","./Event","./easing"],function(t){function e(t){return n.extend(!0,this,{name:o++,source:{},target:null,range:null,tween:s.linear,repeat:!1,duration:1e3,jumpFrames:0},t),this.setup(),this}var i=t("./ig"),n=t("./util"),a=t("./Event"),s=t("./easing"),r=i.getConfig(),o=0;return e.prototype={constructor:e,setup:function(){this.paused=!1,this.repeatCount=0,this.curFrame=0,this.curState={},this.initState={},this.frames=Math.ceil(this.duration*(r.fps||60)/1e3);var t=this.source,e=this.target,i=this.range,a=0,s=0;if(i){for(var o in i)i.hasOwnProperty(o)&&(a=parseFloat(t[o]),s=parseFloat(i[o]),this.curState[o]={from:parseFloat(a-s),cur:a,to:parseFloat(a+s)});return this}if("array"!==n.getType(e)){for(var h in e)e.hasOwnProperty(h)&&(this.initState[h]=this.curState[h]={from:parseFloat(t[h]),cur:parseFloat(t[h]),to:parseFloat(e[h])});return this}this.animIndex=0,this.animLength=e.length;for(var u=0;u<this.animLength;u++)for(var c in e[u])e[u].hasOwnProperty(c)&&(0===u&&(this.curState[c]={from:parseFloat(t[c]),cur:parseFloat(t[c]),to:parseFloat(e[u][c])}),this.initState[c]={from:parseFloat(t[c]),cur:parseFloat(t[c]),to:parseFloat(e[u][c])});return this},play:function(){this.requestID&&this.stop(),this.paused=!1;var t=this;return i.loop({step:function(e,i,n){null!==t.requestID&&t.step.call(t,e,i,n)},jumpFrames:t.jumpFrames}),this},stop:function(){return window.cancelAnimationFrame(this.requestID),this.requestID=null,this},destroy:function(){this.stop(),this.clearEvents()},togglePause:function(){return this.paused=!this.paused,this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},next:function(){this.stop(),this.curFrame++,this.curFrame=this.curFrame>this.frames?this.frames:this.curFrame;var t=this;return i.loop({step:function(e,i,n){null!==t.requestID&&t.step.call(t,e,i,n)},jumpFrames:t.jumpFrames}),this},prev:function(){this.stop(),this.curFrame--,this.curFrame=this.curFrame<0?0:this.curFrame;var t=this;return i.loop({step:function(e,i,n){null!==t.requestID&&t.step.call(t,e,i,n)},jumpFrames:t.jumpFrames}),this},gotoAndPlay:function(t){return this.stop(),this.curFrame=t,this.play.call(this),this},gotoAndStop:function(t){return this.stop(),this.curFrame=t,this},swapFromTo:function(){if(this.curFrame=0,this.curState={},"array"===n.getType(this.target)){this.target.reverse(),this.animIndex=0,this.animLength=this.target.length;for(var t in this.target[this.animIndex])this.curState[t]=this.repeatCount%2===0?{from:this.initState[t].from,cur:this.initState[t].cur,to:this.initState[t].to}:{from:this.initState[t].to,cur:this.initState[t].to,to:this.initState[t].from}}else for(var e in this.target)this.curState[e]=this.repeatCount%2===0?{from:this.initState[e].from,cur:this.initState[e].cur,to:this.initState[e].to}:{from:this.initState[e].to,cur:this.initState[e].to,to:this.initState[e].from};return this},step:function(t,e,i){var n=this;n.requestID=i,n.fire("step",{data:{source:n.source,animInstance:n}});var a;for(var s in n.curState)n.curState.hasOwnProperty(s)&&(a=n.tween(n.curFrame,n.curState[s].cur,n.curState[s].to-n.curState[s].cur,n.frames).toFixed(2),n.source[s]=parseFloat(a));if(n.curFrame++,!(n.curFrame<=n.frames))if(n.range&&!n.rangeExec){n.curFrame=0;for(var r in n.curState)n.curState.hasOwnProperty(r)&&(n.curState[r]={from:n.curState[r].to,cur:n.curState[r].to,to:n.curState[r].from});n.repeat?(n.repeatCount++,n.repeatCount%2===0&&n.fire("repeat",{data:{source:n.source,animInstance:n,repeatCount:n.repeatCount/2}})):n.rangeExec=!0}else if(n.animLength)if(n.fire("groupComplete",{data:{source:n.source,animInstance:n}}),n.animIndex<n.animLength-1){n.animIndex++,n.curFrame=0,n.curState={};var o=n.repeatCount%2===0;for(var h in n.target[n.animIndex])n.target[n.animIndex].hasOwnProperty(h)&&(n.curState[h]={from:o?n.initState[h].from:n.initState[h].to,cur:o?n.initState[h].cur:n.initState[h].to,to:o?n.initState[h].to:n.initState[h].from})}else n.repeat?(n.repeatCount++,n.swapFromTo(),
n.fire("repeat",{data:{source:n.source,animInstance:n,repeatCount:n.repeatCount}})):(n.stop(),n.paused=!1,n.fire("complete",{data:{source:n.source,animInstance:n}}));else n.repeat?(n.repeatCount++,n.swapFromTo(),n.fire("repeat",{data:{source:n.source,animInstance:n,repeatCount:n.repeatCount}})):(n.stop(),n.paused=!1,n.fire("complete",{data:{source:n.source,animInstance:n}}))}},n.inherits(e,a),e}),i("ig/DisplayObject",["require","./ig","./Event","./util","./Animation","./Matrix"],function(t){function e(t){return a.extend(!0,this,{name:"ig_displayobject_"+u++,x:0,y:0,width:0,height:0,cx:0,cy:0,radius:0,scaleX:1,scaleY:1,angle:0,alpha:1,zIndex:0,fillStyle:"transparent",strokeStyle:"transparent",image:null,vx:0,vy:0,ax:0,ay:0,frictionX:1,frictionY:1,children:[],followParent:1,parent:null,status:h.NORMAL,mouseEnable:!1,captureFunc:a.noop,moveFunc:a.noop,releaseFunc:a.noop,debug:!1},t),this._={},this.matrix=new r,this.setPosX(this.x),this.setPosY(this.y),this}var i=t("./ig"),n=t("./Event"),a=t("./util"),s=t("./Animation"),r=t("./Matrix"),o=i.getConfig(),h=o.status,u=0;return e.prototype={constructor:e,setMatrix:function(t){return this.matrix.m=t,this},setRelativeXY:function(t,e){return this.relativeX=t,this.relativeY=e,this},setStatus:function(t){this.status=t||this.status;for(var e=this.children,i=0,n=e.length;n>i;i++)e[i].status=this.status;return this},setCaptureFunc:function(t){return this.captureFunc=t||a.noop,this},setMoveFunc:function(t){return this.moveFunc=t||a.noop,this},setReleaseFunc:function(t){return this.releaseFunc=t||a.noop,this},setPosX:function(t){return this.x=t||this.x,this},setPosY:function(t){return this.y=t||this.y,this},setPos:function(t,e){return this.x=t||this.x,this.y=e||this.y,this},setAccelerationX:function(t){return this.ax=t||this.ax,this},setAccelerationY:function(t){return this.ay=t||this.ay,this},setAcceleration:function(t,e){return this.ax=t||this.ax,this.ay=e||this.ay,this},setFrictionX:function(t){return this.frictionX=t||this.frictionX,this},setFrictionY:function(t){return this.frictionY=t||this.frictionY,this},setFriction:function(t,e){return this.frictionX=t||this.frictionX,this.frictionY=e||this.frictionY,this},setScaleX:function(t){return this.scaleX=t||this.scaleX,this},setScaleY:function(t){return this.scaleY=t||this.scaleY,this},setScale:function(t,e){return this.scaleX=t||this.scaleX,this.scaleY=e||this.scaleY,this},rotate:function(t){var e=this.stage.ctx;return e.save(),e.rotate(a.deg2Rad(t||this.angle||0)),e.restore(),this},setAnimate:function(t){var e=this,i=a.extend(!0,{},{source:e},t),n="function"===a.getType(i.stepFunc)?i.stepFunc:a.noop,r="function"===a.getType(i.repeatFunc)?i.repeatFunc:a.noop,o="function"===a.getType(i.groupCompleteFunc)?i.groupCompleteFunc:a.noop,h="function"===a.getType(i.completeFunc)?i.completeFunc:a.noop;this.animate=new s(i).play().on("step",function(t){n(t)}).on("repeat",function(t){r(t)}).on("groupComplete",function(t){o(t)}).on("complete",function(t){h(t)});var u=0;if(Array.isArray(this.children)&&(u=this.children.length)){var c={};if(!this._.isHandleChildren){var l=this.children;this._.isHandleChildren=!0;for(var d=0;u>d;d++){var f=l[d];f.setRelativeXY(f.x,f.y),f.x+=this.x,f.y+=this.y,f.move(f.x,f.y),f.parent=this,f.setMatrix(this.matrix.m)}}for(var g=t.target||{},p=t.range||{},m=0;u>m;m++)this.children[m].followParent&&(c=a.extend(!0,{},{source:this.children[m]},t),g.x&&(c.target.x+=this.children[m].x+this.x),g.y&&(c.target.y+=this.children[m].y-this.y),p.x&&(c.range.x+=this.children[m].x+this.x),p.y&&(c.range.y+=this.children[m].y-this.y),this.children[m].animate=new s(c).play())}return this},stopAnimate:function(){return this.animate&&this.animate.stop(),this},destroyAnimate:function(){return this.animate&&this.animate.destroy(),this},destroy:function(){this.status=h.DESTROYED},move:function(t,e){return this.x=t||this.x,this.y=e||this.y,this},hitTestPoint:function(){return!1},_step:function(){return this},step:function(){return this},render:function(){return this}},a.inherits(e,n),e}),i("ig/Text",["require","./util","./DisplayObject"],function(t){function e(t){a.call(this,t),n.extend(!0,this,{content:"",size:30,isBold:!1,fontFamily:"sans-serif",useCache:!0},t);var e=i(this.content,this.isBold,this.fontFamily,this.size);return this.bounds={x:this.x,y:this.y,width:e.width,height:e.height,realWidth:e.width,realHeight:e.height},0!==this.width&&(this.bounds.width=this.width),0!==this.height&&(this.bounds.height=this.height),this.width=this.bounds.width,this.height=this.bounds.height,this.font=""+(this.isBold?"bold ":"")+this.size+"pt "+this.fontFamily,this.useCache&&this.initCacheCanvas(),this}function i(t,e,i,n){var a=document.createElement("div");a.innerHTML=t,a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",a.style.fontFamily=i,a.style.fontWeight=e?"bold":"normal",a.style.fontSize=n+"pt",document.body.appendChild(a);var s={width:a.offsetWidth,height:a.offsetHeight};return document.body.removeChild(a),s}var n=t("./util"),a=t("./DisplayObject");return e.prototype={constructor:e,initCacheCanvas:function(){return this.cacheCanvas||(this.cacheCanvas=document.createElement("canvas"),this.cacheCtx=this.cacheCanvas.getContext("2d")),this.cacheCanvas.width=this.bounds.width,this.cacheCanvas.height=this.bounds.height,this.cache(),this},cache:function(){return this.cacheCtx.save(),this.cacheCtx.fillStyle=this.fillStyle,this.cacheCtx.globalAlpha=this.alpha,this.cacheCtx.font=this.font,this.cacheCtx.fillText(this.content,this.bounds.width/2-this.bounds.realWidth/2,this.bounds.height-2),this.cacheCtx.restore(),this},generatePoints:function(){this.points=[{x:this.bounds.x,y:this.bounds.y},{x:this.bounds.x+this.bounds.width,y:this.bounds.y},{x:this.bounds.x+this.bounds.width,y:this.bounds.y+this.bounds.height},{x:this.bounds.x,y:this.bounds.y+this.bounds.height}];for(var t=0,e=this.points.length;e>t;t++){var i=this.matrix.transformPoint(this.points[t].x,this.points[t].y);this.points[t]={x:i.x,y:i.y}}return this.cx=this.bounds.x+this.bounds.width/2,this.cy=this.bounds.y+this.bounds.height/2,this},createPath:function(t){var e=this.points;if(e){var i=e.length;if(i){t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var n=0;i>n;n++)t.lineTo(e[n].x,e[n].y);return t.closePath(),this}}},isPointInPath:function(t,e,i){return this.createPath(t),t.isPointInPath(e,i)},hitTestPoint:function(t,e){var i=this.stage;return this.isPointInPath(i.ctx,t,e)},changeContent:function(t){this.content=t;var e=i(this.content,this.isBold,this.fontFamily,this.size);return this.bounds={x:this.x,y:this.y,width:this.width,height:this.height,realWidth:e.width,realHeight:e.height},this.initCacheCanvas(),this},getContent:function(){return this.content},move:function(t,e){return this.x=this.bounds.x=t,this.y=this.bounds.y=e,this.generatePoints(),this},render:function(t){return t.save(),t.fillStyle=this.fillStyle,t.globalAlpha=this.alpha,t.font=this.font,this.matrix.reset(),this.matrix.translate(this.cx,this.cy),this.parent&&this.followParent?(this.matrix.rotate(this.parent.angle),this.matrix.scale(this.parent.scaleX,this.parent.scaleY)):(this.matrix.rotate(this.angle),this.matrix.scale(this.scaleX,this.scaleY)),this.matrix.translate(-this.cx,-this.cy),this.matrix.setCtxTransform(t),this.generatePoints(),this.useCache?t.drawImage(this.cacheCanvas,this.bounds.x,this.bounds.y):t.fillText(this.content,this.x+this.bounds.width/2-this.bounds.realWidth/2,this.bounds.y+this.bounds.height-2),this.debugRender(t),t.restore(),this},debugRender:function(t){this.debug&&(t.save(),t.strokeStyle="#0f0",t.strokeRect(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height),t.restore())}},n.inherits(e,a),e}),i("ig/Bitmap",["require","./util","./Rectangle"],function(t){function e(t){if(t=t||{},!t.image&&!t.asset)throw new Error("Bitmap must be require a image param");return a.call(this,t),n.extend(!0,this,{sx:0,sy:0,sWidth:0,sHeight:0,useCache:!0},t),this}function i(){this._.isInitDimension||(this._.isInitDimension=!0,0===this.width&&(this.width=this.asset.width),0===this.sWidth&&(this.sWidth=this.asset.width),0===this.height&&(this.height=this.asset.height),0===this.sHeight&&(this.sHeight=this.asset.height))}var n=t("./util"),a=t("./Rectangle");return e.prototype={constructor:e,initCacheCanvas:function(){return this.cacheCanvas||(this.cacheCanvas=document.createElement("canvas"),this.cacheCtx=this.cacheCanvas.getContext("2d")),this.cacheCanvas.width=this.width,this.cacheCanvas.height=this.height,this.cache(),this},cache:function(){return this.cacheCtx.save(),this.cacheCtx.drawImage(this.asset,this.sx,this.sy,this.sWidth,this.sHeight,0,0,this.cacheCanvas.width,this.cacheCanvas.height),this.cacheCtx.restore(),this},change:function(t){return t=t||{},n.extend(this,{asset:this.asset,x:this.x,y:this.y,sx:this.sx,sy:this.sy,sWidth:this.sWidth,sHeight:this.sHeight},t),this._.isInitDimension=!1,i.call(this),this.initCacheCanvas(),this},render:function(t){return i.call(this),t.save(),t.fillStyle=this.fillStyle,t.strokeStyle=this.strokeStyle,t.globalAlpha=this.alpha,e.superClass.render.apply(this,arguments),this.matrix.setCtxTransform(t),this.useCache?(this._.execCache||(this._.execCache=!0,this.initCacheCanvas()),t.drawImage(this.cacheCanvas,this.x,this.y)):t.drawImage(this.asset,this.sx,this.sy,this.sWidth,this.sHeight,this.x,this.y,this.width,this.height),t.restore(),this}},n.inherits(e,a),e}),i("ig/BitmapPolygon",["require","./util","./Polygon"],function(t){function e(t){if(t=t||{},!t.image)throw new Error("BitmapPolygon must be require a image param");return a.call(this,t),n.extend(!0,this,{sx:0,sy:0,sWidth:0,sHeight:0,useCache:!0},t),this.getOriginBounds(),this}function i(){this._.isInitDimension||(this._.isInitDimension=!0,0===this.width&&(this.width=this.asset.width),0===this.height&&(this.height=this.asset.height),0===this.sWidth&&(this.sWidth=this.asset.width),0===this.sHeight&&(this.sHeight=this.asset.height))}var n=t("./util"),a=t("./Polygon");return e.prototype={constructor:e,initCacheCanvas:function(){return this.cacheCanvas||(this.cacheCanvas=document.createElement("canvas"),this.cacheCtx=this.cacheCanvas.getContext("2d")),this.cacheCanvas.width=this.width,this.cacheCanvas.height=this.height,this.cache(),this},cache:function(){return this.cacheCtx.save(),this.cacheCtx.drawImage(this.asset,this.sx,this.sy,this.sWidth,this.sHeight,0,0,this.width,this.height),this.cacheCtx.restore(),this},render:function(t){return i.call(this),t.save(),t.fillStyle=this.fillStyle,t.strokeStyle=this.strokeStyle,t.globalAlpha=this.alpha,e.superClass.render.apply(this,arguments),this.matrix.setCtxTransform(t),this.useCache?(this._.execCache||(this._.execCache=!0,this.initCacheCanvas()),t.drawImage(this.cacheCanvas,this.x,this.y)):t.drawImage(this.asset,this.sx,this.sy,this.sWidth,this.sHeight,this.x,this.y,this.width,this.height),this.generatePoints(),this.getBounds(),this.createPath(t),t.fill(),t.stroke(),t.restore(),this.debugRender(t),this}},n.inherits(e,a),e}),i("ig/SpriteSheet",["require","./ig","./util","./Rectangle"],function(t){function e(t){if(t=t||{},!t.image&&!t.asset)throw new Error("SpriteSheet must be require a image param");return s.apply(this,t),a.extend(this,{jumpFrames:0,isOnceDestroyed:!1,onceDestroyedDone:a.noop,isOnce:!1,onceDone:a.noop},t),this.frameUpdateCount=0,this.frameIndex=0,this}function i(){if(!this._.isSetup){this._.isSetup=!0;var t=null,e=this.sheetKey;if(this.sheetData&&(t=this.sheetData[e]?this.sheetData[e]:this.sheetData),!t)return;a.extend(this,{total:1,sx:0,sy:0,cols:0,rows:0,tileW:0,tileH:0,offsetX:0,offsetY:0},t),this.originalSX=this.sx,this.originalTotal=this.total,this.realCols=o(this.cols-this.sx/this.tileW),this.width=this.width||this.tileW,this.height=this.height||this.tileH}return this}var n=t("./ig"),a=t("./util"),s=t("./Rectangle"),r=n.getConfig("status"),o=Math.floor;return e.prototype={constructor:e,change:function(t){return t=t||{},a.extend(this,{asset:this.asset,x:this.x,y:this.y,width:this.width,height:this.height,total:1,sx:0,sy:0,cols:1,rows:1,tileW:this.tileW,tileH:this.tileH,offsetX:this.offsetX,offsetY:this.offsetY,jumpFrames:this.jumpFrames,isOnceDestroyed:!1,onceDestroyedDone:a.noop,isOnce:!1,onceDone:a.noop},t),this.frameUpdateCount=0,this.frameIndex=0,this.originalSX=this.sx,this.originalTotal=this.total,this.realCols=o(this.cols-this.sx/this.tileW),this.width=this.width||this.tileW,this.height=this.height||this.tileH,this},_step:function(){if(this.frameUpdateCount++,this.frameUpdateCount>this.jumpFrames){if(this.frameUpdateCount=0,this.frameIndex<this.total-1)this.frameIndex++;else{this.frameIndex=0,this.total=this.originalTotal,this.sx=this.originalSX,this.realCols=o(this.cols-this.originalSX/this.tileW),this.sy-=(this.rows-1)*this.tileH;var t=this;if(t.isOnceDestroyed&&(t.status=r.DESTROYED,"function"===a.getType(t.onceDestroyedDone)))var e=setTimeout(function(){clearTimeout(e),t.onceDestroyedDone(t)},10);t.isOnce&&(t.status=r.NOT_UPDATE,"function"===a.getType(t.onceDone)&&t.onceDone(t))}this.frameIndex===this.realCols&&(this.total-=this.realCols,this.frameIndex=0,this.sy+=this.tileH,this.sx=0,this.realCols=this.cols)}return this},render:function(t){return i.call(this),t.save(),t.fillStyle=this.fillStyle,t.strokeStyle=this.strokeStyle,t.globalAlpha=this.alpha,e.superClass.render.apply(this,arguments),this.matrix.setCtxTransform(t),t.drawImage(this.asset,this.frameIndex*this.tileW+this.sx,this.sy,this.tileW,this.tileH,this.x+this.offsetX*this.game.ratioX,this.y+this.offsetY*this.game.ratioY,this.width,this.height),t.restore(),this}},a.inherits(e,s),e}),i("ig/ResourceLoader",["require","./util","./dep/howler"],function(t){function e(){return this.asset={},this}function i(t){var e=t.split(".");return e[e.length-1].toLowerCase()}var n=t("./util"),a=t("./dep/howler").Howl,s={png:"Image",jpg:"Image",gif:"Image",jpeg:"Image",ogg:"Audio",wav:"Audio",m4a:"Audio",mp3:"Audio"};return e.prototype={constructor:e,loadImage:function(t,e,i,n){var a=new Image;a.addEventListener("load",function(){i(t,a)}),a.addEventListener("error",function(){n(e)}),a.src=e},loadOther:function(t,e,n,a){var s=i(e),r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&(200===r.status?"json"===s?n(t,JSON.parse(r.responseText)):n(t,r.responseText):a(e))},r.open("GET",e,!0),r.send(null)},loadResource:function(t,e,r){var o=this;r=r||{},Array.isArray(t)||(t=[t]);for(var h=!1,u=function(t){h=!0,(r.errorCallback||function(t){throw alert("Loading Error: "+t),new Error("Loading Error: "+t)}).call(o,t)},c=r.processCallback||n.noop,l=t.length,d=l,f=function(t,i){h||(o.asset[t]||(o.asset[t]=i),d--,c(l-d,l),0===d&&e&&e.call(o,o.asset))},g=r.customResourceTypes||{},p=n.extend({},s,g),m=l>=10?100:300,v=0;l>v;v++)!function(e){var s,r,h=t[e];"object"===n.getType(h)?(s=h.id,r=h.src):s=r=h,o.asset.hasOwnProperty(s)?f(s,o.asset[s]):setTimeout(function(){if("array"===n.getType(r))!function(t,e){var i={urls:r,onload:function(){f(t,this)},onloaderror:function(){u(this._src||this._urls)}};new a(n.extend(!0,{},i,e.opts||{}))}(s,h);else{var t=o["load"+p[i(r)]];t||(t=o.loadOther),t(s,r,f,u)}},(e+1)*m)}(v)}},e}),i("ig/Game",["require","./ig","./Event","./util","./env","./Stage","./ResourceLoader"],function(t){function e(t){if(d.extend(!0,this,{name:"ig_game_"+v++,canvas:null,maximize:!1,scaleFit:!0,resource:[],fps:m.fps,width:m.width,height:m.height,maxWidth:m.maxWidth,maxHeight:m.maxHeight,horizontalPageScroll:null},t),!this.canvas)throw new Error("Game initialize must be require a canvas param");return this.paused=!1,this.stageStack=[],this.stages={},this._={},this.resourceLoader=new p,h.call(this),this}function i(t){t.setBgColor(t.bgColor),t.bgImg&&t.setBgImg(t.bgImg,t.bgImgRepeatPattern)}function n(t){var e=t.parallaxOpts;t.setParallax(e)}function a(t){for(var e=this.asset,i=this.resource,n=t.displayObjectList,a=0,s=n.length;s>a;a++){var r=n[a];if(!r.asset&&(r instanceof c.Bitmap||r instanceof c.BitmapPolygon||r instanceof c.SpriteSheet)){var o=d.getImgAsset(r.image,e,i);if(!o)throw new Error(""+r.name+"'s image: `"+r.image+"` is not in game.asset");r.asset=o}if(!r.sheetData&&r instanceof c.SpriteSheet){var h=d.getImgAsset(r.sheet,e,i);if(!h)throw new Error(""+r.name+"'s sheet: `"+r.sheet+"` is not in game.asset");r.sheetData=h}}}function s(t){i.call(this,t),n.call(this,t),a.call(this,t)}function r(t){s.call(this,t);var e=0,i=0,n=Date.now(),a=this;c.loop({step:function(s,r,o){(null!==a._.requestID||1===r)&&(a._.requestID=o,a.paused||(i>1e3?(i=0,n=Date.now(),a.fire("gameFPS",{data:{fps:e}}),e=0):(i=Date.now()-n,++e),a.fire("beforeGameStep"),t.step(s,r,o),a.fire("afterGameStep")))},exec:function(e){a.paused||(a.fire("beforeGameRender"),t.render(e),a.fire("afterGameRender"))}})}function o(t){var e=this;Array.isArray(e.resource)&&e.resource.length?e.loadResource(e.resource,function(i){e.asset=i,t.call(e),e.fire("loadResDone")},{processCallback:function(t,i){e.fire("loadResProcess",{data:{loadedCount:t,total:i}})}}):(e.asset={},t.call(e),e.fire("loadResDone"))}function h(){this.canvas=d.domWrap(this.canvas,document.createElement("div"),"ig-game-container-"+this.name),this.canvas.width=this.width,this.canvas.height=this.height;var t=parseInt(this.canvas.width,10),e=parseInt(this.canvas.height,10),i=this.maxWidth,n=this.maxHeight;this.maximize&&(document.body.style.padding=0,document.body.style.margin=0,document.body.style.overflow="hidden"),f.supportTouch&&(this.canvas.style.height=2*e+"px",window.scrollTo(0,1),t=Math.min(window.innerWidth,i),e=Math.min(window.innerHeight,n));var a,s=d.getType(this.horizontalPageScroll);a="number"===s?this.horizontalPageScroll:"boolean"===s?17:0,t=Math.min(window.innerWidth,i)-a,e=Math.min(window.innerHeight,n),this.ctx=this.canvas.getContext("2d"),this.cssWidth=this.canvas.style.height=e+"px",this.cssHeight=this.canvas.style.width=t+"px",this.width=this.canvas.width=2*t,this.height=this.canvas.height=2*e,this.canvas.style.position="relative";var r=this.canvas.parentNode;r.style.width=t+"px",r.style.margin="0 auto",r.style.position="relative";var o=function(){this.scaleFit&&u.call(this),this.ratioX=this.width/m.width,this.ratioY=this.height/m.height,this.cssRatioX=this.width/parseInt(this.cssWidth,10),this.cssRatioY=this.height/parseInt(this.cssHeight,10)};o.call(this);var h=this;return window.addEventListener(f.supportOrientation?"orientationchange":"resize",function(){setTimeout(function(){window.scrollTo(0,1),o.call(h)},0)},!1),this}function u(){var t=window.innerWidth,e=window.innerHeight,i=t/e,n=this.canvas.width/this.canvas.height,a=i>n?e/this.canvas.height:t/this.canvas.width,s=this.canvas.width*a,r=this.canvas.height*a;if(this.canvas.style.width=s+"px",this.canvas.style.height=r+"px",this.canvas.parentNode&&(this.canvas.parentNode.style.width=s+"px",this.canvas.parentNode.style.height=r+"px"),n>=i){var o=(e-r)/2;this.canvas.style.top=o+"px"}this.width=this.canvas.width,this.cssWidth=this.canvas.style.width,this.height=this.canvas.height,this.cssHeight=this.canvas.style.height,this.scaleRatio=a}var c=t("./ig"),l=t("./Event"),d=t("./util"),f=t("./env"),g=t("./Stage"),p=t("./ResourceLoader"),m=c.getConfig(),v=0;return e.prototype={constructor:e,stop:function(){return window.cancelAnimationFrame(this._.requestID),this._.requestID=null,this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},start:function(){var t="",e=d.noop,i=arguments.length;switch(i){case 1:"function"===d.getType(arguments[0])?e=arguments[0]:(t=arguments[0],e=d.noop);break;case 2:t=arguments[0],e=arguments[1]}return o.call(this,function(){if(this._.requestID&&this.stop(),this.paused=!1,t&&this.stages[t]){for(var i=this.stageStack,n=-1,a=0,s=i.length;s>a;a++)if(i[a].name===t){n=a;break}this.swapStage(n,0)}else t=this.getCurrentStage().name;var o=this.getStageByName(t);o&&r.call(this,o),"function"===d.getType(e)&&e.call(this)}),this},loadOther:function(){var t,e,i,n,a=arguments.length;switch(a){case 1:t=e=arguments[0],i=n=d.noop;break;case 2:t=e=arguments[0],i=n=arguments[1];break;case 3:t=e=arguments[0],i=arguments[1],n=arguments[2];break;default:t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3]}this.resourceLoader.loadOther(t,e,i,n)},loadImage:function(){var t,e,i,n,a=arguments.length;switch(a){case 1:t=e=arguments[0],i=n=d.noop;break;case 2:t=e=arguments[0],i=n=arguments[1];break;case 3:t=e=arguments[0],i=arguments[1],n=arguments[2];break;default:t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3]}this.resourceLoader.loadImage(t,e,i,n)},loadResource:function(t,e,i){this.resourceLoader.loadResource(t,e,i)},createStage:function(t){t=d.extend(!0,{},{canvas:this.canvas,offCanvas:this.offCanvas,game:this},t);var e=new g(t);return this.pushStage(e),e},pushStage:function(t){this.getStageByName(t.name)||(t.game=this,this.stageStack.push(t),this.stages[t.name]=t,this.sortStageIndex())},popStage:function(){var t=this.stageStack.pop();t&&(delete this.stages[t.name],this.sortStageIndex())},sortStageIndex:function(){for(var t=this.stageStack,e=t.length-1,i=0;e>=0;e--,i++)t[e].zIndex=i},removeStageByName:function(t){var e=this.getStageByName(t);if(e){delete this.stages[e.name];var i=this.stageStack;d.removeArrByCondition(i,function(e){return e.name===t}),this.sortStageIndex()}},getCurrentStage:function(){return this.stageStack[0]},getStageStack:function(){return this.stageStack},getStageByName:function(t){return this.stages[t]},changeStage:function(t){if(t){for(var e=this.stageStack,i=-1,n=0,a=e.length;a>n;n++)if(e[n].name===t){i=n;break}this.swapStage(i,0)}},swapStageByName:function(t,e){for(var i=this.stageStack,n=i.length,a=-1,s=-1,r=0;n>r;r++)i[r].name===t&&(a=r),i[r].name===e&&(s=r);return-1!==a&&-1!==s?this.swapStage(a,s):this},swapStage:function(t,e){var i=this.stageStack,n=i.length;if(t>=0&&n-1>=t&&e>=0&&n-1>=e){var a=i[t];i[t]=i[e],i[e]=a,this.sortStageIndex()}return this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this},getStageIndex:function(t){return t.zIndex},clearAllStage:function(){for(var t=this.stageStack,e=0,i=t.length;i>e;e++)t[e].destroy();this.stages={},this.stageStack=[]}},d.inherits(e,l),e}),i("ig/Stage",["require","./ig","./Event","./util","./domEvt"],function(t){function e(t){return f.extend(!0,this,{name:"ig_stage_"+y++,canvas:t.canvas,ctx:t.canvas.getContext("2d"),width:t.game.width,height:t.game.height,cssWidth:t.game.cssWidth,cssHeight:t.game.cssHeight,bgColor:"transparent",bgImg:"",bgImgRepeatPattern:"",parallaxOpts:[],captureFunc:f.noop,moveFunc:f.noop,releaseFunc:f.noop},t),this.displayObjectList=[],this.displayObjects={},this.parallaxList=[],u.call(this),this}function i(t,e,i){for(var n,a=this.displayObjectList,s=a.length,r=0;s>r;r++){var o=a[r];o&&(n=o.status,n===m.DESTROYED&&this.removeDisplayObject(o),(n===m.NORMAL||n===m.NOT_RENDER)&&(o._step(t,e,i),o.step(t,e,i)))}}function n(t){var e=t.children;if(Array.isArray(e)){var i,n=this,a=e.length,s=0;if(t._.isHandleChildren)for(s=0;a>s;s++)i=e[s],n.addDisplayObject(i);else for(t._.isHandleChildren=!0,s=0;a>s;s++)i=e[s],i.setRelativeXY(i.x,i.y),i.x+=t.x,i.y+=t.y,i.move(i.x,i.y),i.parent=t,i.setMatrix(t.matrix.m),n.addDisplayObject(i)}}function a(t){this.sortDisplayObject();for(var e,i=this.displayObjectList,n=i.length,a=0;n>a;a++){var s=i[a];s&&(e=s.status,(e===m.NORMAL||e===m.NOT_UPDATE)&&s.render(this.ctx,t))}}function s(t,e){var i=this.parallaxList,n=i.length;if(i&&n)for(var a=0;n>a;a++){var s=i[a];s.anims&&"array"===f.getType(s.anims)?(s.animInterval=s.animInterval||1e4,s.curAnim||(s.curAnim=s.anims[0]),e%s.animInterval===0&&(void 0===s.time&&(s.time=0),s.time++,s.time===s.anims.length&&(s.time=0),s.curAnim=s.anims[s.time])):s.curAnim={ax:s.ax*t,ay:s.ay*t},s.vx=(s.vx*t+s.curAnim.ax)%s.imageAsset.width,s.vy=(s.vy*t+s.curAnim.ay)%s.imageAsset.height}}function r(){var t=this.parallaxList,e=t.length;if(t&&e)for(var i=this.ctx,n=0;e>n;n++){var a=t[n];"no-repeat"!==a.repeat&&h.call(a,i);for(var s=a.imageAsset.width,r=a.imageAsset.height,u={width:0,height:0},c=0;r>c;c+=u.height)for(var l=0;s>l;l+=u.width){var d={x:a.x+l,y:a.y+c},f={width:s-l,height:r-c},g={x:0,y:0};0===l&&(g.x=a.vx),0===c&&(g.y=a.vy),u=o.call(a,i,d,f,g,s,r)}}}function o(t,e,i,n,a,s){var r=Math.abs(n.x)%a,o=Math.abs(n.y)%s,h=n.x<0?a-r:r,u=n.y<0?s-o:o,c=i.width<a-h?i.width:a-h,l=i.height<s-u?i.height:s-u;return t.drawImage(this.imageAsset,h,u,c,l,e.x,e.y,c,l),{width:c,height:l}}function h(t){t.save(),t.fillStyle=t.createPattern(this.imageAsset,this.repeat),t.fillRect(this.x,this.y,t.canvas.width,t.canvas.height),t.restore(),v.src||(v.src=t.canvas.toDataURL(),this.imageAsset=v)}function u(){return c.call(this),g.initMouse(this),this}function c(){var t=this;return g.events.forEach(function(e){var i=g.fireEvt[e];i&&t.on(e,i)}),t}var l=t("./ig"),d=t("./Event"),f=t("./util"),g=t("./domEvt"),p=l.getConfig(),m=p.status,v=new Image,y=0;return e.prototype={constructor:e,setCaptureFunc:function(t){return this.captureFunc=t||f.noop,this},setMoveFunc:function(t){return this.moveFunc=t||f.noop,this},setReleaseFunc:function(t){return this.releaseFunc=t||f.noop,this},clear:function(){return this.ctx.clearRect(0,0,this.width,this.height),this},getIndex:function(){return this.zIndex},setBgColor:function(t){return this.bgColor=t,this.canvas.style.backgroundColor=this.bgColor||"transparent",this},setBgImg:function(t,e){var i="",n="",a="";switch(e){case"center":i="no-repeat",n="center";break;case"full":a="100% 100%"}if(this.canvas.style.backgroundRepeat=i,this.canvas.style.backgroundPosition=n,this.canvas.style.backgroundSize=a,"htmlimageelement"===f.getType(t))this.canvas.style.backgroundImage="url("+t.src+")";else if("string"===f.getType(t)){var s=this.game.asset,r=this.game.resource,o=f.getImgAsset(t,s,r);o?this.canvas.style.backgroundImage="url("+o.src+")":(this.canvas.style.backgroundImage="",this.canvas.style.backgroundRepeat="",this.canvas.style.backgroundPosition="",this.canvas.style.backgroundSize="")}return this},setParallax:function(t){t=t||[],Array.isArray(t)||(t=[t]);for(var e=this.game.asset,i=this.game.resource,n=0,a=t.length;a>n;n++){var s=t[n],r=f.getImgAsset(s.image,e,i);if(!r)throw new Error("Parallax must be require a image param");s.repeat=s.repeat&&-1!==["repeat","repeat-x","repeat-y"].indexOf(s.repeat)?s.repeat:"no-repeat",this.parallaxList.push(f.extend(!0,{imageAsset:r},{x:0,y:0,vx:0,vy:0,ax:0,ay:0},s))}return this},step:function(t,e,n){this.fire("beforeStageStep"),s.call(this,t,e,n),i.call(this,t,e,n),this.fire("afterStageStep")},render:function(t){this.fire("beforeStageRender"),this.clear(),this.ctx.save(),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),r.call(this),a.call(this,t),this.ctx.restore(),this.fire("afterStageRender")},addDisplayObject:function(t){return t&&!this.getDisplayObjectByName(t.name)&&(t.stage=this,t.game=this.game,this.displayObjectList.push(t),this.displayObjects[t.name]=t,n.call(this,t)),t},getDisplayObjectByName:function(t){return this.displayObjects[t]},getDisplayObjectList:function(){return this.displayObjectList},sortDisplayObject:function(){this.displayObjectList.sort(function(t,e){return t.zIndex-e.zIndex})},removeDisplayObject:function(t){return t&&this.removeDisplayObjectByName(t.name),this},removeDisplayObjectByName:function(t){var e=this.displayObjects[t];if(e){delete this.displayObjects[e.name];var i=this.displayObjectList;f.removeArrByCondition(i,function(e){return e.name===t})}return this},clearAllDisplayObject:function(){this.displayObjectList=[],this.displayObjects={}},destroy:function(){this.clearAllDisplayObject(),this.clearEvents()}},f.inherits(e,d),e}),i("ig/domEvt",["require","./util","./env"],function(t){var e=t("./util"),i=t("./env"),n=["touchstart","touchmove","touchend"],a=["mousedown","mousemove","mouseup"],s=[],r={},o=0,h=0,u={};return u.events=i.supportTouch?n:a,u.fireEvt={},u.fireEvt.touchstart=u.fireEvt.mousedown=function(t){var i=t.target;"function"===e.getType(i.captureFunc)&&i.captureFunc.call(i,t.data);for(var n,a=i.displayObjectList,s=-1,r=0,u=a.length;u>r;r++){var c=a[r];c.mouseEnable&&c.hitTestPoint(t.data.x,t.data.y)&&c.zIndex>=s&&(s=c.zIndex,n=c)}return n&&(t.data.curStage=i,n.isCapture=!0,o=t.data.x-n.x,h=t.data.y-n.y,n.captureFunc.call(n,t.data)),i},u.fireEvt.touchmove=u.fireEvt.mousemove=function(t){for(var i=t.target,n=i.displayObjectList,a=0,u=n.length;u>a;a++){var c=n[a];c.hitTestPoint(t.data.x,t.data.y)&&!r[c.name]&&(s.push(c),r[c.name]=c),t.data.holdSpriteList=s,t.data.holdSprites=r,c.mouseEnable&&c.isCapture&&(t.data.curStage=i,t.data.x=t.data.x-o,t.data.y=t.data.y-h,c.moveFunc.call(c,t.data))}return"function"===e.getType(i.moveFunc)&&i.moveFunc.call(i,t.data),i},u.fireEvt.touchend=u.fireEvt.mouseup=function(t){var i=t.target;"function"===e.getType(i.releaseFunc)&&i.releaseFunc.call(i,t.data);for(var n=i.displayObjectList,a=0,u=n.length;u>a;a++){var c=n[a];(c.isCapture||r[c.name])&&(c.releaseFunc.call(c,t.data),c.isCapture=!1)}return o=0,h=0,s=[],r={},i},u.initMouse=function(t){this.stage=t,this.element=t.canvas,this.x=0,this.y=0,this.isDown=!1;var i=e.getElementOffset(this.element);return this.offsetX=i.x,this.offsetY=i.y,this.addEvent(),this},u.addEvent=function(){var t=this,e=t.element,i=t.stage.game.cssRatioX,n=t.stage.game.cssRatioY;t.events.forEach(function(a,s){e.addEventListener(a,function(e){0===s?t.isDown=!0:2===s&&(t.isDown=!1);var r=e.changedTouches?e.changedTouches[0].pageX:e.pageX,o=e.changedTouches?e.changedTouches[0].pageY:e.pageY;t.x=(r-t.offsetX)*i,t.y=(o-t.offsetY)*n,t.stage.fire(a,{data:{x:t.x,y:t.y,isDown:t.isDown,domEvent:e}})})})},u}),i("ig/Storage",["require","./util","./env","./Event"],function(t){function e(t){return i.extend(!0,this,{storageId:s,memoryCache:!1},t),this.storage=n.supportLocalStorage&&!this.memoryCache?window.localStorage:u,this}var i=t("./util"),n=t("./env"),a=t("./Event"),s="_IG",r={OUT_OF_LIMIT:"Out of space limit"},o=function(t){return JSON.stringify(t)},h=function(t){try{t=JSON.parse(t)}catch(e){}return t},u={data:{},setItem:function(t,e){this.data[t]=e},getItem:function(t){return this.data[t]},removeItem:function(t){delete this.data[t]}};return e.prototype={constructor:e,setItem:function(t,e){var i=this._getData();i[t]=e;try{return this.storage.setItem(this.storageId,o(i)),!0}catch(n){return this.fire(r.OUT_OF_LIMIT,{data:n}),!1}},getItem:function(t){return this._getData()[t]},removeItem:function(t){var e=this._getData();delete e[t],this.storage.setItem(this.storageId,o(e))},clear:function(){this.storage.removeItem(this.storageId)},key:function(){return Object.keys(this._getData())},_getData:function(){var t=this.storage.getItem(this.storageId);return t?h(t):{}}},i.inherits(e,a),e}),i("ig/Projection",["require"],function(){function t(t,e){this.min=t,this.max=e}return t.prototype={constructor:t,overlaps:function(t){return this.max>t.min&&this.min<t.max},getOverlap:function(t){var e;return this.overlaps(t)?e=this.max>t.max?t.max-this.min:this.max-t.min:0}},t}),i("ig/Rectangle",["require","./util","./Vector","./Projection","./DisplayObject"],function(t){function e(t){return s.call(this,t),this}var i=t("./util"),n=t("./Vector"),a=t("./Projection"),s=t("./DisplayObject");return e.prototype={constructor:e,generatePoints:function(){this.points=[{x:this.x,y:this.y},{x:this.x+this.width,y:this.y},{x:this.x+this.width,y:this.y+this.height},{x:this.x,y:this.y+this.height}];for(var t=0,e=this.points.length;e>t;t++){var i=this.matrix.transformPoint(this.points[t].x,this.points[t].y);this.points[t]={x:i.x,y:i.y}}return this.cx=this.x+this.width/2,this.cy=this.y+this.height/2,this},getBounds:function(){for(var t=this.points,e=Number.MAX_VALUE,i=Number.MIN_VALUE,n=Number.MAX_VALUE,a=Number.MIN_VALUE,s=0,r=t.length;r>s;s++)t[s].x<e&&(e=t[s].x),t[s].x>i&&(i=t[s].x),t[s].y<n&&(n=t[s].y),t[s].y>a&&(a=t[s].y);return this.bounds={x:e,y:n,width:i-e,height:a-n},this},createPath:function(t){var e=this.points;if(e){var i=e.length;if(i){t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var n=0;i>n;n++)t.lineTo(e[n].x,e[n].y);return t.closePath(),this;

}}},isPointInPath:function(t,e,i){return this.createPath(t),t.isPointInPath(e,i)},hitTestPoint:function(t,e){var i=this.stage;return this.isPointInPath(i.ctx,t,e)},getAxes:function(){for(var t=new n,e=new n,i=[],a=this.points,s=0,r=a.length-1;r>s;s++)t.x=a[s].x,t.y=a[s].y,e.x=a[s+1].x,e.y=a[s+1].y,i.push(t.edge(e).normal());return i},project:function(t){for(var e=[],i=new n,s=this.points,r=0,o=s.length;o>r;r++){var h=s[r];i.x=h.x,i.y=h.y,e.push(i.dot(t))}return new a(Math.min.apply(Math,e),Math.max.apply(Math,e))},collidesWith:function(t){return t?!(this.x+this.width<t.x||t.x+t.width<this.x||this.y+this.height<t.y||t.y+t.height<this.y):!1},separationOnAxes:function(t,e){for(var i=0,n=t.length;n>i;i++){var a=t[i],s=e.project(a),r=this.project(a);if(!s.overlaps(r))return!0}return!1},move:function(t,e){this.x=t,this.y=e,this.generatePoints(),this.getBounds();for(var i=0;i<this.children.length;i++){var n=this.children[i];n.followParent&&n.move(t+n.relativeX,e+n.relativeY)}return this},render:function(t){t.save(),t.fillStyle=this.fillStyle,t.strokeStyle=this.strokeStyle,t.globalAlpha=this.alpha,this.matrix.reset(),this.matrix.translate(this.cx,this.cy),this.parent&&this.followParent?(this.matrix.rotate(this.parent.angle),this.matrix.scale(this.parent.scaleX,this.parent.scaleY)):(this.matrix.rotate(this.angle),this.matrix.scale(this.scaleX,this.scaleY)),this.matrix.translate(-this.cx,-this.cy),this.generatePoints(),this.getBounds(),this.createPath(t),t.fill(),t.stroke(),t.restore(),this.debugRender(t);for(var e=0;e<this.children.length;e++)this.children[e].setMatrix(this.matrix.m);return this},debugRender:function(t){this.debug&&(t.save(),t.strokeStyle="#0f0",t.lineWidth=2,t.strokeRect(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height),t.strokeStyle="#f00",t.beginPath(),this.createPath(t),t.closePath(),t.stroke(),t.restore())}},i.inherits(e,s),e}),i("ig/Polygon",["require","./util","./Vector","./Projection","./DisplayObject"],function(t){function e(t){s.call(this,t),i.extend(!0,this,{points:[]},t);for(var e=0,n=this.points.length;n>e;e++){var a=this.points[e];this.points[e]={x:a.x+this.x,y:a.y+this.y}}return this.origin={x:this.x,y:this.y,points:i.extend(!0,[],this.points),persistencePoints:i.extend(!0,[],this.points)},this.getBounds(),this.cx=this.bounds.x+this.bounds.width/2,this.cy=this.bounds.y+this.bounds.height/2,this}var i=t("./util"),n=t("./Vector"),a=t("./Projection"),s=t("./DisplayObject");return e.prototype={constructor:e,generatePoints:function(){for(var t=0,e=this.origin.points.length;e>t;t++){var i=this.matrix.transformPoint(this.origin.points[t].x,this.origin.points[t].y);this.points[t]={x:i.x,y:i.y}}return this},getBounds:function(){for(var t=this.points,e=Number.MAX_VALUE,i=Number.MIN_VALUE,n=Number.MAX_VALUE,a=Number.MIN_VALUE,s=0,r=t.length;r>s;s++)t[s].x<e&&(e=t[s].x),t[s].x>i&&(i=t[s].x),t[s].y<n&&(n=t[s].y),t[s].y>a&&(a=t[s].y);return this.bounds={x:e,y:n,width:i-e,height:a-n},this},getOriginBounds:function(){for(var t=this.origin.points,e=Number.MAX_VALUE,i=Number.MIN_VALUE,n=Number.MAX_VALUE,a=Number.MIN_VALUE,s=0,r=t.length;r>s;s++)t[s].x<e&&(e=t[s].x),t[s].x>i&&(i=t[s].x),t[s].y<n&&(n=t[s].y),t[s].y>a&&(a=t[s].y);return this.originBounds={x:e,y:n,width:i-e,height:a-n},this},createPath:function(t){var e=this.points;if(e){var i=e.length;if(i){t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var n=0;i>n;n++)t.lineTo(e[n].x,e[n].y);return t.closePath(),this}}},isPointInPath:function(t,e,i){return this.createPath(t),t.isPointInPath(e,i)},hitTestPoint:function(t,e){var i=this.stage;return this.isPointInPath(i.ctx,t,e)},getAxes:function(){for(var t=new n,e=new n,i=[],a=this.points,s=0,r=a.length-1;r>s;s++)t.x=a[s].x,t.y=a[s].y,e.x=a[s+1].x,e.y=a[s+1].y,i.push(t.edge(e).normal());return i},project:function(t){for(var e=[],i=new n,s=this.points,r=0,o=s.length;o>r;r++){var h=s[r];i.x=h.x,i.y=h.y,e.push(i.dot(t))}return new a(Math.min.apply(Math,e),Math.max.apply(Math,e))},collidesWith:function(t){if(!t)return!1;var e=this.getAxes().concat(t.getAxes());return!this.separationOnAxes(e,t)},separationOnAxes:function(t,e){for(var i=0,n=t.length;n>i;i++){var a=t[i],s=e.project(a),r=this.project(a);if(!s.overlaps(r))return!0}return!1},move:function(t,e){this.x=t,this.y=e;for(var i=0,n=this.origin.persistencePoints.length;n>i;i++)this.origin.points[i]={x:this.origin.persistencePoints[i].x+t-this.origin.x,y:this.origin.persistencePoints[i].y+e-this.origin.y};for(var a=this.origin.points,s=Number.MAX_VALUE,r=Number.MIN_VALUE,o=Number.MAX_VALUE,h=Number.MIN_VALUE,u=0,c=a.length;c>u;u++)a[u].x<s&&(s=a[u].x),a[u].x>r&&(r=a[u].x),a[u].y<o&&(o=a[u].y),a[u].y>h&&(h=a[u].y);this.cx=s+(r-s)/2,this.cy=o+(h-o)/2,this.getOriginBounds();for(var l=0;l<this.children.length;l++){var d=this.children[l];d.followParent&&d.move(t+d.relativeX,e+d.relativeY)}return this},render:function(t){t.save(),t.fillStyle=this.fillStyle,t.strokeStyle=this.strokeStyle,t.globalAlpha=this.alpha,this.matrix.reset(),this.matrix.translate(this.cx,this.cy),this.parent&&this.followParent?(this.matrix.rotate(this.parent.angle),this.matrix.scale(this.parent.scaleX,this.parent.scaleY)):(this.matrix.rotate(this.angle),this.matrix.scale(this.scaleX,this.scaleY)),this.matrix.translate(-this.cx,-this.cy),this.generatePoints(),this.getBounds(),this.createPath(t),t.fill(),t.stroke(),t.restore();for(var e=0;e<this.children.length;e++)this.children[e].setMatrix(this.matrix.m);return this.debugRender(t),this},debugRender:function(t){this.debug&&(t.save(),t.strokeStyle="#0f0",t.lineWidth=2,t.strokeRect(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height),this.points.length&&(t.strokeStyle="#f00",t.beginPath(),this.createPath(t),t.closePath(),t.stroke()),t.restore())}},i.inherits(e,s),e});var n,a=e("ig"),s="ig/dep/howler",r="",o="";o?a[o]?a[o][r]=e(s):(n={},n[r]=e(s),a[o]=n):(n=e(s),r&&(a[r]=n));var n,s="ig/config",r="",o="";o?a[o]?a[o][r]=e(s):(n={},n[r]=e(s),a[o]=n):(n=e(s),r&&(a[r]=n));var n,s="ig/util",r="util",o="";o?a[o]?a[o][r]=e(s):(n={},n[r]=e(s),a[o]=n):(n=e(s),r&&(a[r]=n));var n,s="ig/easing",r="easing",o="";o?a[o]?a[o][r]=e(s):(n={},n[r]=e(s),a[o]=n):(n=e(s),r&&(a[r]=n));var n,s="ig/env",r="env",o="";o?a[o]?a[o][r]=e(s):(n={},n[r]=e(s),a[o]=n):(n=e(s),r&&(a[r]=n));var n,s="ig/Event",r="",o="";o?a[o]?a[o][r]=e(s):(n={},n[r]=e(s),a[o]=n):(n=e(s),r&&(a[r]=n));var n,s="ig/Vector",r="Vector",o="";o?a[o]?a[o][r]=e(s):(n={},n[r]=e(s),a[o]=n):(n=e(s),r&&(a[r]=n));var n,s="ig/Matrix",r="Matrix",o="";o?a[o]?a[o][r]=e(s):(n={},n[r]=e(s),a[o]=n):(n=e(s),r&&(a[r]=n));var n,s="ig/Animation",r="Animation",o="";o?a[o]?a[o][r]=e(s):(n={},n[r]=e(s),a[o]=n):(n=e(s),r&&(a[r]=n));var n,s="ig/DisplayObject",r="DisplayObject",o="";o?a[o]?a[o][r]=e(s):(n={},n[r]=e(s),a[o]=n):(n=e(s),r&&(a[r]=n));var n,s="ig/Text",r="Text",o="";o?a[o]?a[o][r]=e(s):(n={},n[r]=e(s),a[o]=n):(n=e(s),r&&(a[r]=n));var n,s="ig/Bitmap",r="Bitmap",o="";o?a[o]?a[o][r]=e(s):(n={},n[r]=e(s),a[o]=n):(n=e(s),r&&(a[r]=n));var n,s="ig/BitmapPolygon",r="BitmapPolygon",o="";o?a[o]?a[o][r]=e(s):(n={},n[r]=e(s),a[o]=n):(n=e(s),r&&(a[r]=n));var n,s="ig/SpriteSheet",r="SpriteSheet",o="";o?a[o]?a[o][r]=e(s):(n={},n[r]=e(s),a[o]=n):(n=e(s),r&&(a[r]=n));var n,s="ig/ResourceLoader",r="",o="";o?a[o]?a[o][r]=e(s):(n={},n[r]=e(s),a[o]=n):(n=e(s),r&&(a[r]=n));var n,s="ig/Game",r="Game",o="";o?a[o]?a[o][r]=e(s):(n={},n[r]=e(s),a[o]=n):(n=e(s),r&&(a[r]=n));var n,s="ig/Stage",r="",o="";o?a[o]?a[o][r]=e(s):(n={},n[r]=e(s),a[o]=n):(n=e(s),r&&(a[r]=n));var n,s="ig/domEvt",r="",o="";o?a[o]?a[o][r]=e(s):(n={},n[r]=e(s),a[o]=n):(n=e(s),r&&(a[r]=n));var n,s="ig/Storage",r="Storage",o="";o?a[o]?a[o][r]=e(s):(n={},n[r]=e(s),a[o]=n):(n=e(s),r&&(a[r]=n));var n,s="ig/Projection",r="",o="";o?a[o]?a[o][r]=e(s):(n={},n[r]=e(s),a[o]=n):(n=e(s),r&&(a[r]=n));var n,s="ig/Rectangle",r="Rectangle",o="";o?a[o]?a[o][r]=e(s):(n={},n[r]=e(s),a[o]=n):(n=e(s),r&&(a[r]=n));var n,s="ig/Polygon",r="Polygon",o="";o?a[o]?a[o][r]=e(s):(n={},n[r]=e(s),a[o]=n):(n=e(s),r&&(a[r]=n)),t.ig=a}(window),function(){for(var t=414,e=[],i=function(t){return function(e,i){return e.length>i?e:(t+e).slice(-i)}}("000"),n=0;t>=n;n++)e.push({id:"img"+n,src:"./robots/robot1/"+i(n,3)+".png"});var a=[{id:"preBg",src:"./img/bg.png"},{id:"meteor1",src:"./img/meteor1.png"},{id:"meteor2",src:"./img/meteor2.png"},{id:"planet2",src:"./img/planet2.png"},{id:"planet3",src:"./img/planet3.png"},{id:"planet4",src:"./img/planet4.png"},{id:"star1",src:"./img/star1.png"},{id:"star2",src:"./img/star2.png"},{id:"stage2Bg",src:"./img/stage2-bg.png"},{id:"eddy1",src:"./img/eddy1-new.png"},{id:"eddy2",src:"./img/eddy2.png"},{id:"robot",src:"./img/robot.png"},{id:"stage3Bg",src:"./img/stage3-bg.png"},{id:"sPlanet1",src:"./img/planet1-small.png"},{id:"bPlanet3",src:"./img/planet3-big.png"},{id:"earth",src:"./img/earth.png"},{id:"spin",src:"./img/spin.png"},{id:"circleUp",src:"./img/circle-up.png"},{id:"circleDown",src:"./img/circle-down.png"},{id:"bigBall",src:"./img/big-ball.png"},{id:"manyBall",src:"./img/many-ball.png"},{id:"robot2",src:"./img/robot2.png"},{id:"goldStar1",src:"./img/gold-star1.png"},{id:"goldStar2",src:"./img/gold-star2.png"},{id:"goldStar3",src:"./img/gold-star3.png"},{id:"robotHead",src:"./img/robot-head.png"},{id:"robotBody",src:"./img/robot-body.png"},{id:"robotAudio",src:["./audio/robot1.mp3"]},{id:"bgMusic",src:["./audio/bg.mp3"],opts:{loop:!0}}];ig.setConfig("RESOURCE",a.concat(e)),ig.setConfig("ROBOT_COUNT",t),ig.setConfig("ROBOT_RESOURCE",e)}();var stage1=function(){function t(r){window.Howler._iOSEnabled||e.asset.bgMusic.play(),$("body").off("swipeUp",t),c.off("click",t),c.css("display","none"),p.dispose();var o=$(e.canvas);e.pause(),o.animate({top:-e.height},1500,function(t){e.resume(),i.clearAllDisplayObject(),o.css("opacity",0).css("top",s),stage2.init({game:e,stage:i,baseZIndex:a,isStart:n}),o.animate({opacity:1},1500,function(t){})})}var e,i,n,a,s,r=ig.util,o=r.randomInt,h=ig.getConfig(),u=h.status,o=r.randomInt,c=$(".arrow-container"),l=function(){function t(t){var h="0."+o(2,8),c=n[r.randomInt(0,n.length-1)],l=$.extend(!0,{name:"meteor"+s++,asset:e.asset.meteor1,x:-e.asset.meteor1.width,y:o(-e.asset.meteor1.height,e.height-100),zIndex:a-9,alpha:h,vx:c.vx,vy:c.vy},t),d=i.addDisplayObject(new ig.Bitmap(l));d.step=function(t,i,n){this.vx+=this.ax*t,this.vx*=this.frictionX*t,this.vy+=this.ay*t,this.vy*=this.frictionY*t,this.x+=this.vx*t,this.y+=this.vy*t,this.x>e.width&&(this.vx=-Math.abs(this.vx),this.setStatus(u.DESTROYED))}}var n=[{vx:7,vy:3.5},{vx:8,vy:4},{vx:9,vy:4.5},{vx:10,vy:5},{vx:11,vy:5.5},{vx:12,vy:6},{vx:13,vy:6.5}],s=0,h={};return h.create=function(){var i=o(1,2),n=e.asset["meteor"+i];t({asset:n,x:-n.width,y:o(-n.height,e.height-100)})},h}(),d=function(){function t(){{var t=i.addDisplayObject(new ig.Bitmap({name:"circleUp",asset:e.asset.circleUp,x:parseInt(40*e.ratioX),y:parseInt(300*e.ratioY),scaleX:.9,scaleY:.9,zIndex:a-5})),n=i.addDisplayObject(new ig.Bitmap({name:"circleDown",asset:e.asset.circleDown,x:t.x,y:t.y+54,scaleX:.9,scaleY:.9,zIndex:a+5})),s=i.addDisplayObject(new ig.Bitmap({name:"bigBall",asset:e.asset.bigBall,x:73*e.ratioX,y:263*e.ratioY,scaleX:.9,scaleY:.9,zIndex:a}));i.addDisplayObject(new ig.Bitmap({name:"manyBall",asset:e.asset.manyBall,x:60*e.ratioX,y:280*e.ratioY,scaleX:.9,scaleY:.9,zIndex:a-10}))}setTimeout(function(){t.setAnimate({range:{x:7},repeat:1,duration:3e3}),n.setAnimate({range:{x:7},repeat:1,duration:3e3})},2e3),s.setAnimate({range:{x:15},repeat:1,duration:3e3})}function n(){var t=i.addDisplayObject(new ig.Bitmap({name:"planet2",asset:e.asset.planet2,x:230*e.ratioX,y:170*e.ratioY,scaleX:.9,scaleY:.9,zIndex:a}));setTimeout(function(){t.setAnimate({range:{x:8},repeat:1,duration:3e3})},1e3)}function s(){var t=i.addDisplayObject(new ig.Bitmap({name:"planet3",asset:e.asset.planet3,x:110*e.ratioX,y:70*e.ratioY,scaleX:.9,scaleY:.9,zIndex:a}));setTimeout(function(){t.setAnimate({range:{x:11},repeat:1,duration:3e3})},3e3)}function r(){i.addDisplayObject(new ig.Bitmap({name:"planet4",asset:e.asset.planet4,x:0*e.ratioX,y:10*e.ratioY,scaleX:.8,scaleY:.8,zIndex:a-1}))}var o={};return o.create=function(){t(),n(),s(),r()},o}(),f=function(){function t(){var t=i.addDisplayObject(new ig.Bitmap({name:"star1",asset:e.asset.star1,x:80*e.ratioX,y:230*e.ratioY,zIndex:a}));t.setAnimate({range:{alpha:1},repeat:1,duration:1e3})}function n(){var t=i.addDisplayObject(new ig.Bitmap({name:"star2",asset:e.asset.star2,x:265*e.ratioX,y:50*e.ratioY,zIndex:a}));t.setAnimate({range:{alpha:1},repeat:1,duration:900})}var s={};return s.create=function(){t(),n()},s}(),g=!1,p={init:function(r){e=r.game,i=r.stage,a=r.baseZIndex,n=r.isStart,s=$(e.canvas).css("top"),d.create(),f.create(),$(".stage-text").hide(),$(".stage1-text").show(),c.css("display","block"),l.create(),ig.loop({step:function(t,e,i){(!n||g)&&window.cancelAnimationFrame(i),l.create()},exec:function(t){},jumpFrames:50}),$("body").on("swipeUp",t),c.on("click",t)},dispose:function(){g=!0,$(".stage1-text").fadeOut()}};return p}(),stage2=function(){function t(c){$(".stage2-text").fadeOut(),$("body").off("swipeUp",t),d.off("click",t),d.css("display","none"),s.animate.destroy(),s.setAnimate({target:{y:r.cy-250,scaleX:.3,scaleY:.3,alpha:0},duration:1500,tween:ig.easing.easeInElastic,completeFunc:function(t){var s=$(e.canvas);r.setAnimate({target:{scaleX:0,scaleY:0,alpha:0},duration:1500}),o.setAnimate({target:{scaleX:0,scaleY:0,alpha:0},duration:1500}),h.setAnimate({target:{scaleX:0,scaleY:0,alpha:0},duration:1500,completeFunc:function(t){e.resume(),s.css("opacity",0).css("top",u),i.removeDisplayObjectByName("eddy1"),i.removeDisplayObjectByName("eddy2"),stage3.init({game:e,stage:i,baseZIndex:a,isStart:n}),s.animate({opacity:1},0,function(t){})}})}})}var e,i,n,a,s,r,o,h,u,c=ig.util,l=(c.randomInt,ig.getConfig()),d=(l.status,c.randomInt,$(".arrow-container")),f=function(){function t(){var t=e.asset.stage2Bg,n=i.addDisplayObject(new ig.Bitmap({name:"stage2Bg",asset:t,x:(e.width-t.width)/2,y:(e.height-t.height)/2-100,scaleX:.8,scaleY:.8,zIndex:a-1}));return n}var n={};return n.create=function(){return t()},n}(),g=function(){function t(){var t=i.addDisplayObject(new ig.Bitmap({name:"star1",asset:e.asset.star1,x:320*e.ratioX,y:100*e.ratioY,zIndex:a}));t.setAnimate({range:{alpha:1},repeat:1,duration:1e3})}function n(){var t=i.addDisplayObject(new ig.Bitmap({name:"star2",asset:e.asset.star2,x:65*e.ratioX,y:50*e.ratioY,zIndex:a}));t.setAnimate({range:{alpha:1},repeat:1,duration:900})}var s={};return s.create=function(){t(),n()},s}(),p=function(){function t(){var t=1,n=e.asset.eddy1,r=i.addDisplayObject(new ig.Bitmap({name:"eddy1",asset:n,x:(e.width-n.width)/2,y:(e.height-n.height)/2-250,scaleX:.8,scaleY:.8,zIndex:a-1}));return r.step=function(e,i,n){t?this.angle+=s:this.angle-=s,Math.ceil(this.angle)>15?t=0:Math.ceil(this.angle)<-15&&(t=1)},r}function n(){var t=e.asset.eddy2,n=i.addDisplayObject(new ig.Bitmap({name:"eddy2",asset:t,x:(e.width-t.width)/2,y:(e.height-t.height)/2-250,scaleX:.8,scaleY:.8,zIndex:a-1}));return n.step=function(t,e,i){this.angle+=r},n}var s=.3,r=.2,o={};return o.create=function(){var e={};return e.inline=t(),e.outline=n(),e},o}(),m=function(){function t(){var t=e.asset.robot,n=i.addDisplayObject(new ig.Bitmap({name:"robot",asset:e.asset.robot,x:(e.width-t.width)/2,y:e.height,zIndex:a}));return n.setAnimate({target:{y:e.height-t.height-100},duration:1500,tween:ig.easing.easeOutBounce,completeFunc:function(t){d.css("display","block"),n.setAnimate({range:{y:20},duration:1500,repeat:1})}}),n}var n={};return n.create=function(){return t()},n}(),v={init:function(c){e=c.game,i=c.stage,a=c.baseZIndex,n=c.isStart,u=$(e.canvas).css("top"),h=f.create(),g.create();var l=p.create();r=l.inline,o=l.outline,$(".stage-text").hide();var v=setTimeout(function(){clearTimeout(v),$(".stage2-text").fadeIn()},1e3),y=setTimeout(function(){clearTimeout(y),$(".stage2-text").fadeOut(function(){s=m.create()})},4e3);$("body").on("swipeUp",t),d.on("click",t)}};return v}(),stage3=function(){function t(){var t=n.getDisplayObjectByName("stage3Bg");t&&t.setAnimate({target:{alpha:0},duration:3e3,completeFunc:function(){t.setStatus(c.DESTROYED)}});var a=n.getDisplayObjectByName("sPlanet1");a.setAnimate({target:{x:i.width},duration:500,completeFunc:function(){a.setStatus(c.DESTROYED)}});var s=n.getDisplayObjectByName("bPlanet3");s.setAnimate({target:{x:-i.asset.bPlanet3.width},duration:500,completeFunc:function(){s.setStatus(c.DESTROYED),l.addClass("slow-down"),setTimeout(function(){l.on("click",e)},1500)}})}function e(t){t.preventDefault(),t.stopPropagation(),l.hide();var e=$(i.canvas);i.pause(),$(".stage3-text").fadeOut(),e.animate({opacity:0},500,function(t){i.resume(),n.clearAllDisplayObject(),stage4.init({game:i,stage:n,baseZIndex:s,isStart:a}),e.animate({opacity:1},500,function(t){})})}var i,n,a,s,r,o,h=ig.util,u=(h.randomInt,ig.getConfig()),c=u.status,l=(h.randomInt,$(".arrow-container"),$(".awake-container")),d=function(){function t(){{var t=i.asset.stage3Bg;n.addDisplayObject(new ig.Bitmap({name:"stage3Bg",asset:t,x:(i.width-t.width)/2,y:(i.height-t.height)/2,zIndex:s-1}))}}var e={};return e.create=function(){t()},e}(),f=function(){function t(){var t=n.addDisplayObject(new ig.Bitmap({name:"sPlanet1",asset:i.asset.sPlanet1,x:230*i.ratioX,y:0,scaleX:.8,scaleY:.8,zIndex:s}));return t.setAnimate({target:{x:230*i.ratioX,y:50*i.ratioY},duration:2e3,completeFunc:function(e){t.setAnimate({range:{x:10},repeat:1,duration:1e3})}}),t}function e(){var t=n.addDisplayObject(new ig.Bitmap({name:"bPlanet3",asset:i.asset.bPlanet3,x:60*i.ratioX,y:0,scaleX:.8,scaleY:.8,zIndex:s}));return t.setAnimate({target:{x:60*i.ratioX,y:150*i.ratioY},duration:2e3,completeFunc:function(e){t.setAnimate({range:{x:-8},repeat:1,duration:1e3})}}),t}var a={};return a.create=function(){t(),e()},a}(),g=function(){function t(){var t=n.addDisplayObject(new ig.Bitmap({name:"star1",asset:i.asset.star1,x:180*i.ratioX,y:100*i.ratioY,zIndex:s}));t.setAnimate({range:{alpha:1},repeat:1,duration:1e3})}function e(){var t=n.addDisplayObject(new ig.Bitmap({name:"star2",asset:i.asset.star2,x:35*i.ratioX,y:250*i.ratioY,zIndex:s}));t.setAnimate({range:{alpha:1},repeat:1,duration:900})}function a(){var t=n.addDisplayObject(new ig.Bitmap({name:"star3",asset:i.asset.star2,x:280*i.ratioX,y:400*i.ratioY,zIndex:s}));t.setAnimate({range:{scaleX:.3,scaleY:.3,alpha:1},repeat:1,duration:800})}var r={};return r.create=function(){t(),e(),a()},r}(),p=function(){function t(){var t=i.asset.earth,e=n.addDisplayObject(new ig.Bitmap({name:"earth",asset:t,x:(i.width-t.width)/2,y:i.height+1e3,scaleX:.8,scaleY:.8,zIndex:s}));e.setAnimate({target:{y:i.height-450},duration:2e3}),e.step=function(t,e,i){this.angle-=.1}}var e={};return e.create=function(){t()},e}(),m=function(){function t(t,e){function a(){0==u?(r.alpha=1,o.alpha=0,h.alpha=0,u++,setTimeout(a,200)):1==u?(r.alpha=0,o.alpha=1,h.alpha=0,u++,setTimeout(a,200)):(r.alpha=0,o.alpha=0,h.alpha=1,u=0,setTimeout(a,200))}var r=(i.asset.goldStar1,n.addDisplayObject(new ig.Bitmap({name:"goldStar1",asset:i.asset.goldStar1,x:t-60,y:e-100,zIndex:s+1}))),o=n.addDisplayObject(new ig.Bitmap({name:"goldStar2",asset:i.asset.goldStar2,x:t-60,y:e-100,zIndex:s+1,alpha:0})),h=n.addDisplayObject(new ig.Bitmap({name:"goldStar3",asset:i.asset.goldStar3,x:t-60,y:e-100,zIndex:s+1,alpha:0}));r.setAnimate({range:{angle:7},repeat:1,duration:2e3}),o.setAnimate({range:{angle:7},repeat:1,duration:2e3}),h.setAnimate({range:{angle:7},repeat:1,duration:2e3}),setTimeout(a,500);var u=0}var e={};return e.create=function(e,i){return t(e,i)},e}(),v=function(){function t(t,e){var a=(i.asset.robotHead,n.addDisplayObject(new ig.Bitmap({name:"robotHead",asset:i.asset.robotHead,x:t,y:e,scaleX:.9,scaleY:.9,zIndex:s+2})));return a.setAnimate({range:{angle:7},repeat:1,duration:2e3}),a}function e(t,e){var a=(i.asset.robotBody,n.addDisplayObject(new ig.Bitmap({name:"robotBody",asset:i.asset.robotBody,x:t+52,y:e+230,scaleX:.9,scaleY:.9,zIndex:s+2})));return a}var a={};return a.create=function(i,n){var a={};return a.head=t(i,n),a.body=e(i,n),a},a}(),y=function(){function e(){var e=i.asset.robot2,a=n.addDisplayObject(new ig.Bitmap({name:"robot2",asset:i.asset.robot2,x:(i.width-e.width)/2,y:-e.height,scaleX:0,scaleY:0,zIndex:s+1}));return a.setAnimate({target:{y:i.height-e.height-170,scaleX:.9,scaleY:.9,angle:720},duration:1500,tween:ig.easing.easeOutBounce,completeFunc:function(e){var i=a.x,n=a.y;a.status=0,r=v.create(i,n),m.create(i,n);var s=setTimeout(function(){clearTimeout(s),t()},4e3)}}),a}var a={};return a.create=function(){return e()},a}(),x={init:function(t){i=t.game,n=t.stage,s=t.baseZIndex,a=t.isStart,o=$(i.canvas).css("top"),d.create(),f.create(),g.create(),p.create(),$(".stage-text").hide(),$(".stage3-text").fadeIn();var e=setTimeout(function(){clearTimeout(e),$(".stage3-text").fadeOut(function(){y.create()})},4e3)}};return x}(),stage4=function(){var t,e,i,n,a=ig.util,s=a.randomInt,r=ig.getConfig(),o=r.status,s=a.randomInt,h=($(".arrow-container"),function(){function i(i){var u="0."+s(2,8),c=r[a.randomInt(0,r.length-1)],l=$.extend(!0,{name:"meteor"+h++,asset:t.asset.meteor1,x:-t.asset.meteor1.width,y:s(-t.asset.meteor1.height,t.height-100),zIndex:n-9,alpha:u,vx:c.vx,vy:c.vy},i),d=e.addDisplayObject(new ig.Bitmap(l));d.step=function(e,i,n){this.vx+=this.ax*e,this.vx*=this.frictionX*e,this.vy+=this.ay*e,this.vy*=this.frictionY*e,this.x+=this.vx*e,this.y+=this.vy*e,this.x>t.width&&(this.vx=-Math.abs(this.vx),this.setStatus(o.DESTROYED))}}var r=[{vx:7,vy:3.5},{vx:8,vy:4},{vx:9,vy:4.5},{vx:10,vy:5},{vx:11,vy:5.5},{vx:12,vy:6},{vx:13,vy:6.5}],h=0,u={};return u.create=function(){var e=s(1,2),n=t.asset["meteor"+e];i({asset:n,x:-n.width,y:s(-n.height,t.height-100)})},u}()),u=!1,c={init:function(a){t=a.game,e=a.stage,n=a.baseZIndex,i=a.isStart,$(".stage-text").hide(),$(".stage4-text").fadeIn(),$(".put-phone").show(),$("#rC_PB").redCountdown({preset:"flat-colors-fat",end:11,now:0,labelsOptions:{lang:{seconds:"S"}},onEndCallback:function(){u=!0,$("#rC_PB").empty(),$(window).off("resize.redCountdown"),$(".countdown-circle").hide(),$(".put-phone").hide(),$(".stage-text").hide(),e.clearAllDisplayObject();var a=setTimeout(function(){clearTimeout(a),stage5.init({game:t,stage:e,baseZIndex:n,isStart:i})},100)}}),h.create(),ig.loop({step:function(t,e,n){return!i||u?void window.cancelAnimationFrame(n):void h.create()},exec:function(t){},jumpFrames:100})},dispose:function(){u=!0}};return c}(),stage5=function(){function t(t){var n=e.width,a=n,s=i.addDisplayObject(new ig.Bitmap({name:"img",image:"img0",zIndex:1,x:(e.width-n)/2,y:(e.height-a)/2,width:n,height:a,asset:e.asset.img0,scaleX:.1,scaleY:.1}));s.setAnimate({target:{scaleX:1,scaleY:1},duration:400,completeFunc:function(){t(s)}})}var e,i,n,a=!1,s=ig.getConfig("ROBOT_COUNT"),r=(ig.getConfig("ROBOT_COUNT"),{init:function(a){e=a.game,i=a.stage,n=a.isStart,$("body").addClass("roboting"),t(function(t){e.asset.bgMusic.stop(),e.asset.robotAudio.play();var i=0;ig.loop({step:function(t,e,i){},exec:function(n){s>i?i++:i=0,t.change({asset:e.asset["img"+i]})}})})},dispose:function(){a=!0,$("body").removeClass("roboting")}});return r}();window.onload=function(){var t=ig.util,e=ig.getConfig(),i=(e.status,t.randomInt,new ig.Storage,document.querySelector("#canvas")),n=document.querySelector("#load-process");document.addEventListener("touchmove",function(t){t.preventDefault(),t.stopPropagation()}),window.Howler.iOSAutoEnable=!0;var a=new ig.Game({canvas:i,name:"xiaoduGame",maximize:1,resource:ig.getConfig("RESOURCE")}).on("loadResProcess",function(t){n.style.display="block";var e=t.data.loadedCount/t.data.total*100;e=String(e).split("."),$(".loading-num").text(e[0]+"%")}).on("loadResDone",function(t){$(".load-bg").addClass("loaded"),n.style.display="none";var e=a.asset.bgMusic;e.play()}),s=a.createStage({name:"xiaoduStage"}),r=10,o=!1;a.start("xiaoduStage",function(){o=!0,stage1.init({game:a,stage:s,baseZIndex:r,isStart:o})})};